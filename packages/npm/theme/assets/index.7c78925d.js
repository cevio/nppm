var It=Object.defineProperty,zt=Object.defineProperties;var Rt=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var Et=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable;var Qe=(t,n,u)=>n in t?It(t,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[n]=u,ue=(t,n)=>{for(var u in n||(n={}))Et.call(n,u)&&Qe(t,u,n[u]);if(Ae)for(var u of Ae(n))gt.call(n,u)&&Qe(t,u,n[u]);return t},Fe=(t,n)=>zt(t,Rt(n));var pt=(t,n)=>{var u={};for(var r in t)Et.call(t,r)&&n.indexOf(r)<0&&(u[r]=t[r]);if(t!=null&&Ae)for(var r of Ae(t))n.indexOf(r)<0&&gt.call(t,r)&&(u[r]=t[r]);return u};var _=(t,n,u)=>(Qe(t,typeof n!="symbol"?n+"":n,u),u);import{R as e,_ as We,B as H,r as O,a as Lt,b as i,c as W,F as y,d as f,e as ee,G as Ct,C as qt,f as M,E as jt,g as re,h as z,D as Ut,i as Ht,S as bt,T as Ze,A as yt,U as Me,j as ct,I as Vt,k as Bt,u as Je,l as v,m as Yt,n as w,o as Gt,p as x,q as g,s as Kt,t as Y,v as N,w as h,x as Qt,y as Wt,z as te,H as Q,N as Zt,J as _e,K as $,L as ht,M as Jt,O as Xt,P as se,Q as ce,V as en,W as Dt,X as tn,Y as V,Z as I,$ as nn,a0 as an,a1 as un,a2 as rn,a3 as de,a4 as Ee,a5 as Ce,a6 as ae,a7 as j,a8 as X,a9 as ke,aa as Pe,ab as $e,ac as Ie,ad as be,ae as xt,af as xe,ag as ze,ah as sn,ai as ln,aj as cn,ak as ye,al as St,am as ne,an as He,ao as wt,ap as At,aq as on,ar as mn,as as dn,at as En,au as gn,av as pn,aw as hn,ax as Fn,ay as fn,az as vn,aA as _n,aB as Cn,aC as bn,aD as yn,aE as Re,aF as Bn,aG as Ft,aH as Dn,aI as xn,aJ as Sn,aK as wn}from"./vendor.a246c14a.js";const An=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function u(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=u(a);fetch(a.href,s)}};An();function kn(){return e.createElement(We,{status:"404",title:"404",subTitle:"\u5BF9\u4E0D\u8D77\uFF0C\u60A8\u8BBF\u95EE\u7684\u9875\u9762\u4E0D\u5B58\u5728\uFF01",extra:e.createElement(H,{type:"primary",onClick:()=>O("/")},"\u56DE\u9996\u9875")})}const b=Lt.create({baseURL:"/~"});b.interceptors.response.use(t=>t,t=>t.response?Promise.reject(new Error(t.response.data||t.response.statusText)):Promise.reject(t));function Pn(){return{id:0,account:null,nickname:null,email:null,login_code:"default",avatar:null,scopes:[],admin:!1,gmt_create:new Date,gmt_modified:new Date,login_forbiden:!1}}const kt=Pn(),ge=i.exports.createContext(kt),Pt=i.exports.createContext({version:"0.0.0"});async function Nn(){return(await b.get("/setup/mode")).data}function On(t){return b.post("/setup/orm",t)}function Tn(t){return b.post("/setup/redis",t)}function Mn(t){return b.post("/user",t)}async function $n(){return(await b.get("/user")).data}var ft=[{label:"MongoDB",value:"mongodb"},{label:"MsSQL",value:"mssql"},{label:"MySQL",value:"mysql"},{label:"Oracle",value:"oracle"},{label:"Postgres",value:"postgres"}];const In="_wraper_1gfai_1",zn="_header_1gfai_10",Rn="_action_1gfai_17",Ln="_traffic_1gfai_21",qn="_windowIcon_1gfai_21",jn="_windowClose_1gfai_27",Un="_windowMinimize_1gfai_30",Hn="_windowFullScreen_1gfai_34",Vn="_title_1gfai_39",Yn="_body_1gfai_50";var J={wraper:In,header:zn,action:Rn,traffic:Ln,windowIcon:qn,windowClose:jn,windowMinimize:Un,windowFullScreen:Hn,title:Vn,body:Yn};function it(t){return e.createElement("div",{className:W(J.wraper,t.className),style:t.style},e.createElement("div",{className:J.header},e.createElement("div",{className:J.action},t.traffic&&e.createElement("div",{className:J.traffic},e.createElement("div",{className:W(J.windowIcon,J.windowClose)}),e.createElement("div",{className:W(J.windowIcon,J.windowMinimize)}),e.createElement("div",{className:W(J.windowIcon,J.windowFullScreen)})),t.extra),!!t.title&&e.createElement("div",{className:J.title},t.title)),e.createElement("div",{className:J.body},t.children))}const Gn="_copyright_1yqiw_5";var Kn={copyright:Gn};function Qn(t){return e.createElement(i.exports.Fragment,null,t.children,e.createElement(y,{blocked:!0,align:"center",valign:"middle",direction:"column",className:Kn.copyright},e.createElement(f.Text,null,e.createElement("span",null,"Node Private Package Manager"),e.createElement(ee,{type:"vertical"}),e.createElement("span",null,"MIT Licensed"),e.createElement(ee,{type:"vertical"}),e.createElement(f.Link,{href:"https://github.com/cevio/nppm",target:"_blank"},e.createElement(Ct,null))),e.createElement(f.Text,null,e.createElement("span",null,"Copyright ",e.createElement(qt,null),"2019-present"),e.createElement(ee,{type:"vertical"}),e.createElement(M,null,e.createElement(f.Link,{href:"https://github.com/cevio",target:"_blank"},"Evio Shen"),e.createElement("span",null,"All Rights Reserved.")))))}const Wn="_layout_5646r_5",Zn="_container_5646r_5",Jn="_banner_5646r_10",Xn="_slogen_5646r_15",ea="_head_5646r_22",ta="_search_5646r_28",na="_searcher_5646r_32",aa="_searchIcon_5646r_37",ua="_logo_5646r_40",ra="_content_5646r_43",sa="_navs_5646r_46",la="_title_5646r_49",ca="_nav_5646r_46",ia="_loginModule_5646r_62";var L={layout:Wn,container:Zn,banner:Jn,slogen:Xn,head:ea,search:ta,searcher:na,searchIcon:aa,logo:ua,content:ra,navs:sa,title:la,nav:ca,loginModule:ia};function vt(t){return e.createElement("svg",ue({viewBox:"0 0 780 250"},t),e.createElement("path",{fill:t.color||"#231F20",d:"M240,250h100v-50h100V0H240V250z M340,50h50v100h-50V50z M480,0v200h100V50h50v150h50V50h50v150h50V0H480z M0,200h100V50h50v150h50V0H0V200z"}))}function oa(t,n){return b.post("/webLogin?type="+t,n)}function ma(){return b.delete("/webLogout")}async function da(){return(await b.get("/plugin/logins")).data}function Ea(t){return e.createElement(M,null,e.createElement(jt,null),e.createElement(re,null,e.createElement(re.Item,null,"\u5DE5\u4F5C\u53F0"),e.createElement(re.Item,null,t.group),e.createElement(re.Item,null,t.space)))}async function Nt(t){return(await b.get("/package/"+t)).data}async function ga(t){return(await b.get(`/package/${encodeURIComponent(t)}/maintainers`)).data}function pa(t,n){return b.put("/star/"+encodeURIComponent(t),{status:n})}async function ha(t){return(await b.get("/star/"+encodeURIComponent(t))).data}async function Fa(t){return(await b.get(`/package/${encodeURIComponent(t)}/entity`)).data}function fa(t,n){return b.post(`/packages/${encodeURIComponent(t)}/transfer`,{uid:n})}var va=Object.defineProperty,_a=Object.getOwnPropertyDescriptor,Ca=(t,n,u,r)=>{for(var a=r>1?void 0:r?_a(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&va(n,u,a),a};let G=class{constructor(){_(this,"setAdminDisabled",t=>!(t==null?void 0:t.admin));_(this,"setUserDisabled",t=>!(t==null?void 0:t.id));_(this,"navs",[{label:"\u7BA1\u7406\u4E2D\u5FC3",key:"admin",children:[{label:"\u6570\u636E\u5E93\u914D\u7F6E",key:"orm",url:"/admin/setting/orm",icon:e.createElement(Ut,null),disabled:this.setAdminDisabled.bind(this)},{label:"Redis\u914D\u7F6E",key:"redis",url:"/admin/setting/redis",icon:e.createElement(Ht,null),disabled:this.setAdminDisabled.bind(this)},{label:"\u6574\u7AD9\u57FA\u672C\u8BBE\u7F6E",key:"setting",url:"/admin/setting/base",icon:e.createElement(bt,null),disabled:this.setAdminDisabled.bind(this)},{label:"\u6CE8\u518C\u7528\u6237\u7BA1\u7406",key:"user",url:"/admin/users",icon:e.createElement(Ze,null),disabled:this.setAdminDisabled.bind(this)},{label:"\u63D2\u4EF6\u5B89\u88C5\u53CA\u7BA1\u7406",key:"plugin",url:"/admin/plugins",icon:e.createElement(yt,null),disabled:this.setAdminDisabled.bind(this)}]},{label:"\u4E2A\u4EBA\u4E2D\u5FC3",key:"base",children:[{label:"\u6211\u7684\u4FE1\u606F",key:"scope",url:"/user",icon:e.createElement(Me,null),match:t=>/^\/user\/\d+$/.test(t),disabled:this.setUserDisabled.bind(this)},{label:"\u6211\u7684\u6536\u85CF",key:"like",url:"/stars",icon:e.createElement(ct,null),disabled:this.setUserDisabled.bind(this)}]},{label:"\u6570\u636E\u7EDF\u8BA1",key:"rank",children:[{label:"\u6A21\u5757\u6536\u85CF\u699C",key:"stars",url:"/rank/stars",icon:e.createElement(Vt,null)},{label:"\u6A21\u5757\u4E0B\u8F7D\u699C",key:"downloads",url:"/rank/downloads",icon:e.createElement(Bt,null)}]}])}render(t){const n=Je(c=>c.pathname),u=v(this.banner_navs,this),r=v(this.chooseUserOrLogin,this),a=v(this.content,this),s=i.exports.useContext(ge),l=c=>{if(!!c)return O("/search?q="+encodeURIComponent(c)+"&t="+(c.startsWith("@")?"private":"public"))};return e.createElement("div",{className:L.layout},e.createElement("div",{className:L.banner},e.createElement(y,{className:L.container,align:"between",valign:"middle"},e.createElement(M,{className:L.slogen},e.createElement(Yt,null),"Node Private Package Manager"),e.createElement(u,null))),e.createElement("div",{className:L.head},e.createElement(y,{className:L.container,valign:"middle",align:"between"},e.createElement(vt,{width:70,onClick:()=>O("/"),className:L.logo}),e.createElement(y,{span:1,valign:"middle",className:L.search},e.createElement(w,{placeholder:"Search Packages",bordered:!1,prefix:e.createElement(Gt,{className:L.searchIcon}),className:L.searcher,onPressEnter:c=>l(c.currentTarget.value)})),e.createElement(r,null))),e.createElement("div",{className:W(L.container,L.content)},e.createElement(x,{gutter:24},e.createElement(g,{span:5},e.createElement(Kt,{offsetTop:24},e.createElement("div",null,this.navs.map(c=>e.createElement("div",{className:L.navs,key:c.key},e.createElement(f.Paragraph,{className:L.title},c.label),e.createElement("ul",null,c.children.map(m=>{const d=(m.match?m.match(n,m.url):n===m.url)||n===m.url,o=typeof m.disabled=="boolean"?m.disabled:typeof m.disabled=="function"?m.disabled(s):!1;return e.createElement("li",{key:c.key+":"+m.key,className:L.nav},e.createElement(y,{align:"between",valign:"middle"},e.createElement(f.Link,{onClick:()=>n!==m.url&&O(m.url),disabled:o},e.createElement(M,null,e.createElement("span",null,m.icon),e.createElement("span",null,m.label))),d?e.createElement(Y,{status:"processing"}):e.createElement(Y,{status:"default"})))}))))))),e.createElement(g,{span:19},t.login&&!s.id?e.createElement(We,{status:"403",title:"403",subTitle:"\u62B1\u6B49\uFF0C\u6B64\u9875\u9762\u4EC5\u5BF9\u767B\u5F55\u7528\u6237\u5F00\u653E",extra:e.createElement(H,{type:"primary",onClick:()=>O("/")},"\u56DE\u9996\u9875")}):t.admin&&!s.admin?e.createElement(We,{status:"403",title:"403",subTitle:"\u62B1\u6B49\uFF0C\u6B64\u9875\u9762\u4EC5\u5BF9\u7BA1\u7406\u5458\u5F00\u653E",extra:e.createElement(H,{type:"primary",onClick:()=>O("/")},"\u56DE\u9996\u9875")}):e.createElement(a,null,t.children)))))}content(t){const[n,u]=i.exports.useState(null),[r,a]=i.exports.useState(null),s=Je(l=>l.pathname);return i.exports.useEffect(()=>{let l=!1;for(let c=0;c<this.navs.length;c++){const m=this.navs[c];for(let d=0;d<m.children.length;d++){const o=m.children[d];if((o.match?o.match(s,o.url):s===o.url)||s===o.url){u(m.label),a(o.label),l=!0;break}}}l||(u(null),a(null))},[s]),e.createElement(x,{gutter:[24,24]},!!n&&!!r&&e.createElement(g,{span:24},e.createElement(Ea,{group:n,space:r})),e.createElement(g,{span:24},t.children))}banner_navs(){const t=i.exports.useContext(Pt),{result:n,error:u}=N(Nt,["@nppm/npm"]),r=i.exports.useMemo(()=>n&&n["dist-tags"].latest||t.version,[n]),a=r===t.version,s=a?"success":"warning";return i.exports.useEffect(()=>u&&h.error(u.message),[u]),e.createElement(re,{separator:e.createElement(ee,{type:"vertical"})},e.createElement(re.Item,null,e.createElement(f.Link,{href:"https://cevio.github.io/nppm/",target:"_blank"},e.createElement(Qt,null)," \u6587\u6863")),e.createElement(re.Item,null,e.createElement(f.Link,{href:"https://github.com/cevio/nppm/issues",target:"_blank"},e.createElement(Wt,null)," \u8BA8\u8BBA")),e.createElement(re.Item,null,e.createElement(f.Link,{href:"https://github.com/cevio/nppm",target:"_blank"},e.createElement(Ct,null)," GitHub")),e.createElement(re.Item,null,e.createElement(te,{title:a?null:"\u53EF\u4EE5\u5347\u7EA7\u5230\u6700\u65B0\u7248\u672Cv"+r},e.createElement(Q,{style:{cursor:"pointer"},color:s,onClick:()=>O("/package/@nppm/npm?tab=versions")},e.createElement("span",{className:"number"},"v",t.version),!a&&e.createElement(Zt,{style:{fontSize:12}})))))}chooseUserOrLogin(){const t=i.exports.useContext(ge),n=v(this.user,this),u=v(this.loginButton,this);return t.id>0?e.createElement(n,null):e.createElement(u,null)}loginButton(){const[t,n]=i.exports.useState(!1),u=v(this.loginModal,this);return e.createElement(i.exports.Fragment,null,e.createElement(H,{type:"primary",onClick:()=>n(!0)},"\u767B\u5F55"),e.createElement(_e,{title:null,footer:null,visible:t,onCancel:()=>n(!1),width:400},e.createElement(u,{onCancel:()=>n(!1)})))}loginModal(t){const[n,u]=i.exports.useState(!1),[r,a]=i.exports.useState(null),[s,l]=i.exports.useState(null),{loading:c,execute:m}=$(oa),d=N(da,[]),o=i.exports.useMemo(()=>d?d.result?d.result:[]:[],[d==null?void 0:d.result]),p=()=>{m("default",{username:r,password:s}).then(()=>h.success("\u767B\u5F55\u6210\u529F")).then(()=>{a(null),l(null),t.onCancel()}).then(()=>window.location.reload()).catch(E=>h.error(E.message))},F=E=>{m(E,{redirect:window.location.href}).then(C=>window.location.href=C.data.loginUrl).catch(C=>h.error(C.message))};return e.createElement(y,{direction:"column",align:"center",valign:"middle"},e.createElement(f.Paragraph,null,e.createElement(vt,{color:"#13bf89",width:100})),e.createElement(f.Paragraph,null,"Node Private Package Manager"),e.createElement(f.Paragraph,null,e.createElement(w,{disabled:c,size:"large",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",style:{width:300},prefix:e.createElement(Me,null),value:r,onChange:E=>a(E.target.value)})),e.createElement(f.Paragraph,null,e.createElement(w,{size:"large",disabled:c,type:n?"text":"password",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",style:{width:300},prefix:e.createElement(ht,null),value:s,onChange:E=>l(E.target.value),suffix:e.createElement("span",{style:{cursor:"pointer"},onClick:()=>u(!n)},n?e.createElement(Jt,null):e.createElement(Xt,null))})),e.createElement(f.Paragraph,{style:{width:300}},e.createElement(H,{block:!0,type:"primary",size:"large",loading:c,onClick:p},"\u767B\u5F55")),e.createElement(ee,{plain:!0},"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"),e.createElement(M,{size:24},o.length?o.map(E=>e.createElement(te,{title:E.plugin_name,key:E.name},e.createElement("div",{className:L.loginModule,onClick:()=>F(E.name)},e.createElement(se,{src:E.plugin_icon})))):e.createElement(f.Text,{style:{color:"#bbb",fontSize:12}},"\u6682\u65E0\u5176\u4ED6\u7B2C\u4E09\u65B9\u767B\u5F55")))}user(){const t=i.exports.useContext(ge),{execute:n,loading:u}=$(ma),r=()=>{n().then(()=>h.success("\u9000\u51FA\u767B\u5F55\u6210\u529F")).then(()=>window.location.reload()).catch(s=>h.error(s.message))},a=e.createElement(ce,{style:{minWidth:200}},e.createElement(ce.Item,{disabled:!0,key:"account",icon:e.createElement(Me,null)},t.account),e.createElement(ce.Item,{disabled:!0,key:"type",icon:e.createElement(ht,null)},t.login_code==="default"?"NPM\u9ED8\u8BA4":t.login_code),e.createElement(ce.Item,{disabled:!0,key:"admin",icon:e.createElement(Ze,null)},t.admin?"\u7BA1\u7406\u5458":"\u666E\u901A\u7528\u6237"),e.createElement(ce.Divider,null),e.createElement(ce.Item,{key:"logout",icon:e.createElement(en,null),danger:!0,onClick:()=>r(),disabled:u},"\u9000\u51FA\u767B\u5F55"));return e.createElement(Dt,{overlay:a},e.createElement(M,{style:{cursor:"pointer"}},e.createElement(se,{src:t.avatar}),e.createElement("span",{className:"number"},t.nickname),e.createElement(tn,{style:{fontSize:12,color:"#aaa"}})))}};G=Ca([z()],G);const ba="_container_1r1ed_1";var ya={container:ba},Ba=Object.defineProperty,Da=Object.getOwnPropertyDescriptor,xa=(t,n,u,r)=>{for(var a=r>1?void 0:r?Da(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&Ba(n,u,a),a};let Le=class{constructor(){_(this,"onEnter",{scale:.8,opacity:0,type:"from",duration:100});_(this,"onLeave",{opacity:0,width:0,scale:0,duration:200});_(this,"onEnd",t=>{(t.type==="appear"||t.type==="enter")&&(t.target.style="display: inline-block")})}render(t){const[n,u]=i.exports.useState(!1),r=i.exports.useRef(null),a=c=>{t.disabled||t.loading||c&&(t.onAddone(c),u(!1))},s=()=>u(!1),l=()=>{u(!0),setTimeout(()=>r==null?void 0:r.current.focus())};return e.createElement(M,{direction:"vertical",style:{width:"100%"}},e.createElement("div",{className:ya.container},e.createElement(V,{spinning:t.loading},t.dataSource.length?e.createElement(nn,{enter:this.onEnter,leave:this.onLeave,appear:!1,onEnd:this.onEnd},t.dataSource.map(c=>e.createElement("span",{key:c+"",style:{display:"inline-block"}},e.createElement(Q,{color:t.color,closable:!t.disabled,onClose:m=>{m.preventDefault(),!(t.disabled||t.loading)&&t.onRemoveone(c)}},c)))):e.createElement(I,{image:I.PRESENTED_IMAGE_SIMPLE,description:t.emptyText}))),t.disabled?null:n?e.createElement(w,Fe(ue({},t.input||{}),{ref:r,onPressEnter:c=>a(c.currentTarget.value),onBlur:s,disabled:t.disabled||t.loading})):e.createElement(H,Fe(ue({},t.button||{}),{onClick:l,disabled:t.disabled,loading:t.loading}),t.buttonText||"\u6DFB\u52A0"))}};Le=xa([z()],Le);const Sa="_name_c9cbk_9",wa="_version_c9cbk_16",Aa="_description_c9cbk_20",ka="_extra_c9cbk_29";var fe={package:"_package_c9cbk_1",name:Sa,version:wa,description:Aa,extra:ka};function Se(t){return e.createElement(y,{className:fe.package,direction:"column",blocked:!0,onClick:()=>O("/package/"+t.name)},e.createElement(f.Text,{ellipsis:!0,className:fe.name,title:t.name},t.name),e.createElement(f.Text,{className:fe.version},t.version),e.createElement(f.Paragraph,{className:fe.description,ellipsis:{rows:2},title:t.description},t.description),e.createElement("div",{className:W(fe.extra,"number")},e.createElement(te,{title:"\u6A21\u5757\u4F53\u79EF"},e.createElement(an,null)," ",un(t.size)),e.createElement(ee,{type:"vertical"}),e.createElement(te,{title:"\u603B\u4E0B\u8F7D\u91CF"},e.createElement(Bt,null)," ",t.downloads),e.createElement(ee,{type:"vertical"}),e.createElement(te,{title:"\u7248\u672C\u4E2A\u6570"},e.createElement(rn,null)," ",t.versions),e.createElement(ee,{type:"vertical"}),e.createElement(te,{title:"\u603B\u8D21\u732E\u8005\u4E2A\u6570"},e.createElement(Ze,null)," ",t.maintainers),e.createElement(ee,{type:"vertical"}),e.createElement(te,{title:"\u603B\u6536\u85CF\u6570"},e.createElement(ct,null)," ",t.likes)))}var Pa=Object.defineProperty,Na=Object.getOwnPropertyDescriptor,Oa=(t,n,u,r)=>{for(var a=r>1?void 0:r?Na(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&Pa(n,u,a),a};let qe=class{constructor(){_(this,"dataBaseTypes",ft);_(this,"textLabelSize",6);_(this,"holderLabelSize",18)}render(){const t=v(this.config,this),[n,u]=i.exports.useState("mysql"),[r,a]=i.exports.useState(null),[s,l]=i.exports.useState(null),[c,m]=i.exports.useState(null),[d,o]=i.exports.useState(null),[p,F]=i.exports.useState(null),{loading:E,execute:C}=$(()=>A?On({type:n,host:r,port:s,username:c,password:d,database:p}):Promise.reject(new Error("\u8BF7\u5C06\u4FE1\u606F\u586B\u5199\u5B8C\u6574"))),A=i.exports.useMemo(()=>!(!n||!ft.map(S=>S.value).includes(n)||!r||!s||s<0||!c||!d||!p),[n,r,s,c,d,p]),T=()=>{C().then(()=>h.success("\u5B89\u88C5\u6570\u636E\u5E93\u6210\u529F")).then(()=>window.location.reload()).catch(S=>h.error(S.message))};return e.createElement("div",{className:"setup_container"},e.createElement(it,{traffic:!0,title:"NPPM SETUP - \u5B89\u88C5\u6570\u636E\u5E93"},e.createElement(x,{gutter:[12,12],align:"middle"},e.createElement(t,{required:!0,title:"\u6570\u636E\u5E93\u9009\u62E9"},e.createElement(de,{disabled:E,options:this.dataBaseTypes,value:n,onChange:S=>u(S)})),e.createElement(t,{required:!0,title:"\u6570\u636E\u5E93\u8FDE\u63A5\u5730\u5740"},e.createElement(w,{disabled:E,value:r,onChange:S=>a(S.target.value),placeholder:"\u4F8B\u5982 127.0.0.1",style:{width:400}})),e.createElement(t,{required:!0,title:"\u6570\u636E\u5E93\u7AEF\u53E3"},e.createElement(Ee,{disabled:E,value:s,onChange:S=>l(S),placeholder:"\u4F8B\u5982 8642",step:1,min:3e3,style:{width:120}})),e.createElement(t,{required:!0,title:"\u6570\u636E\u5E93\u8D26\u53F7"},e.createElement(w,{disabled:E,value:c,onChange:S=>m(S.target.value),placeholder:"\u4F8B\u5982 admin",style:{width:180}})),e.createElement(t,{required:!0,title:"\u6570\u636E\u5E93\u5BC6\u7801"},e.createElement(w,{disabled:E,value:d,onChange:S=>o(S.target.value),placeholder:"\u4F8B\u5982 admin888",type:"password",style:{width:180}})),e.createElement(t,{required:!0,title:"\u6570\u636E\u5E93\u540D\u79F0"},e.createElement(w,{disabled:E,value:p,onChange:S=>F(S.target.value),placeholder:"\u4F8B\u5982 mysql_database",style:{width:180}})),e.createElement(t,null,e.createElement(H,{type:"primary",loading:E,onClick:T,disabled:!A},"\u5F00\u59CB")))))}config(t){return e.createElement(i.exports.Fragment,null,e.createElement(g,{span:this.textLabelSize},e.createElement(y,{align:"right"},!!t.required&&e.createElement("span",{className:"required"},"*"),t.title)),e.createElement(g,{span:this.holderLabelSize},t.children))}};qe=Oa([z()],qe);var Ta=Object.defineProperty,Ma=Object.getOwnPropertyDescriptor,$a=(t,n,u,r)=>{for(var a=r>1?void 0:r?Ma(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&Ta(n,u,a),a};let Xe=class{constructor(){_(this,"textLabelSize",6);_(this,"holderLabelSize",18)}render(){const t=v(this.config,this),[n,u]=i.exports.useState(null),[r,a]=i.exports.useState(null),[s,l]=i.exports.useState(null),[c,m]=i.exports.useState(null),{loading:d,execute:o}=$(()=>p?Tn({host:n,port:r,password:s,db:c}):Promise.reject(new Error("\u8BF7\u5C06\u4FE1\u606F\u586B\u5199\u5B8C\u6574"))),p=i.exports.useMemo(()=>!(!n||!r||r<0||c&&c<0),[n,r,s,c]),F=()=>{o().then(()=>h.success("\u5B89\u88C5`Redis`\u6210\u529F")).then(()=>window.location.reload()).catch(E=>h.error(E.message))};return e.createElement("div",{className:"setup_container"},e.createElement(it,{traffic:!0,title:"NPPM SETUP - \u5B89\u88C5`Redis`"},e.createElement(x,{gutter:[12,12],align:"middle"},e.createElement(t,{required:!0,title:"\u8FDE\u63A5\u5730\u5740"},e.createElement(w,{disabled:d,value:n,onChange:E=>u(E.target.value),placeholder:"\u4F8B\u5982 127.0.0.1",style:{width:400}})),e.createElement(t,{required:!0,title:"\u7AEF\u53E3"},e.createElement(Ee,{disabled:d,value:r,onChange:E=>a(E),placeholder:"\u4F8B\u5982 8642",step:1,min:3e3,style:{width:120}})),e.createElement(t,{title:"\u6570\u636E\u5E93\u5BC6\u7801"},e.createElement(w,{disabled:d,value:s,onChange:E=>l(E.target.value),placeholder:"\u4F8B\u5982 admin888",type:"password",style:{width:180}})),e.createElement(t,{title:"\u901A\u9053\u7D22\u5F15"},e.createElement(Ee,{disabled:d,value:c,onChange:E=>m(E),placeholder:"\u4F8B\u5982 0 \u9009\u586B",step:1,min:0,style:{width:120}})),e.createElement(t,null,e.createElement(H,{type:"primary",loading:d,onClick:F,disabled:!p},"\u5F00\u59CB")))))}config(t){return e.createElement(i.exports.Fragment,null,e.createElement(g,{span:this.textLabelSize},e.createElement(y,{align:"right"},!!t.required&&e.createElement("span",{className:"required"},"*"),t.title)),e.createElement(g,{span:this.holderLabelSize},t.children))}};Xe=$a([z()],Xe);var Ia=Object.defineProperty,za=Object.getOwnPropertyDescriptor,Ra=(t,n,u,r)=>{for(var a=r>1?void 0:r?za(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&Ia(n,u,a),a};let et=class{constructor(){_(this,"textLabelSize",6);_(this,"holderLabelSize",18)}render(){const t=v(this.config,this),[n,u]=i.exports.useState(null),[r,a]=i.exports.useState(null),[s,l]=i.exports.useState(null),[c,m]=i.exports.useState(null),{loading:d,execute:o}=$(()=>p?r!==s?Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4")):Mn({username:n,password:r,email:c}):Promise.reject(new Error("\u8BF7\u5C06\u4FE1\u606F\u586B\u5199\u5B8C\u6574"))),p=i.exports.useMemo(()=>!(!n||!r||!c),[n,r,c]),F=()=>{o().then(()=>h.success("\u521B\u5EFA\u7BA1\u7406\u5458\u6210\u529F")).then(()=>window.location.reload()).catch(E=>h.error(E.message))};return e.createElement("div",{className:"setup_container"},e.createElement(it,{traffic:!0,title:"NPPM SETUP - \u521B\u5EFA\u7BA1\u7406\u5458"},e.createElement(x,{gutter:[12,12],align:"middle"},e.createElement(t,{required:!0,title:"\u8D26\u53F7"},e.createElement(w,{disabled:d,value:n,onChange:E=>u(E.target.value),placeholder:"\u4F8B\u5982 admin",style:{width:150}})),e.createElement(t,{required:!0,title:"\u5BC6\u7801"},e.createElement(w,{disabled:d,value:r,onChange:E=>a(E.target.value),placeholder:"\u4F8B\u5982 admin888",type:"password",style:{width:150}})),e.createElement(t,{required:!0,title:"\u91CD\u590D\u5BC6\u7801"},e.createElement(w,{disabled:d,value:s,onChange:E=>l(E.target.value),placeholder:"\u4F8B\u5982 admin888",type:"password",style:{width:150}})),e.createElement(t,{required:!0,title:"\u90AE\u7BB1"},e.createElement(w,{disabled:d,value:c,onChange:E=>m(E.target.value),placeholder:"\u4F8B\u5982 admin@qq.com",style:{width:300}})),e.createElement(t,null,e.createElement(H,{type:"primary",loading:d,onClick:F,disabled:!p},"\u4FDD\u5B58")))))}config(t){return e.createElement(i.exports.Fragment,null,e.createElement(g,{span:this.textLabelSize},e.createElement(y,{align:"right"},!!t.required&&e.createElement("span",{className:"required"},"*"),t.title)),e.createElement(g,{span:this.holderLabelSize},t.children))}};et=Ra([z()],et);var La=Object.defineProperty,qa=Object.getOwnPropertyDescriptor,Ve=(t,n,u,r)=>{for(var a=r>1?void 0:r?qa(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&La(n,u,a),a};let pe=class{constructor(){_(this,"ORMSetup");_(this,"RedisSetup");_(this,"AdminSetup")}render(t){const n=Ce(this.ORMSetup),u=Ce(this.RedisSetup),r=Ce(this.AdminSetup),a=v(this.user,this),{loading:s,result:l,error:c}=N(Nn,[]);return i.exports.useEffect(()=>{if(c)return h.error(c.message)},[c]),e.createElement(Pt.Provider,{value:{version:l==null?void 0:l.version}},e.createElement(V,{spinning:s,style:{minHeight:200}},(l==null?void 0:l.mode)===1&&e.createElement(n,null),(l==null?void 0:l.mode)===2&&e.createElement(u,null),(l==null?void 0:l.mode)===3&&e.createElement(r,null),(l==null?void 0:l.mode)===0&&e.createElement(a,null,t.children)))}user(t){const{loading:n,result:u,error:r}=N($n,[]);return i.exports.useEffect(()=>{if(r)return h.error(r.message)},[r]),e.createElement(V,{spinning:n},e.createElement(ge.Provider,{value:u||kt},t.children))}};Ve([ae(qe)],pe.prototype,"ORMSetup",2);Ve([ae(Xe)],pe.prototype,"RedisSetup",2);Ve([ae(et)],pe.prototype,"AdminSetup",2);pe=Ve([z()],pe);const ja="_tip_18pdo_1";var Ne={tip:ja};async function Ua(t){return(await b.get("/package/update/recently?top="+t)).data}async function Ha(){return(await b.get("/dashboard/users")).data}async function Va(){return(await b.get("/dashboard/packages")).data}async function Ya(){return(await b.get("/dashboard/stars")).data}async function Ga(){return(await b.get("/dashboard/downloads")).data}var Ka=Object.defineProperty,Qa=Object.getOwnPropertyDescriptor,Wa=(t,n,u,r)=>{for(var a=r>1?void 0:r?Qa(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&Ka(n,u,a),a};let tt=class{constructor(){_(this,"gutter",24)}render(){const t=v(this.statistics,this),n=v(this.recently,this);return e.createElement(x,{gutter:[this.gutter,this.gutter]},e.createElement(g,{span:24},"\u6570\u636E\u7EDF\u8BA1"),e.createElement(g,{span:24},e.createElement(t,null)),e.createElement(g,{span:24},"\u6700\u8FD1\u66F4\u65B0\u7684\u6A21\u5757"),e.createElement(g,{span:24},e.createElement(n,{top:15})))}statistics(){const t=v(this.users,this),n=v(this.packages,this),u=v(this.stars,this),r=v(this.downloads,this);return e.createElement(x,{gutter:[24,24]},e.createElement(g,{span:6},e.createElement(t,null)),e.createElement(g,{span:6},e.createElement(n,null)),e.createElement(g,{span:6},e.createElement(u,null)),e.createElement(g,{span:6},e.createElement(r,null)))}recently(t){const{loading:n,result:u,error:r}=N(Ua,[t.top]),a=u||[];return i.exports.useEffect(()=>{if(r)return h.error(r.message)},[r]),e.createElement(V,{spinning:n,style:{minHeight:200}},a.length?e.createElement(x,{gutter:[24,24]},a.map(s=>e.createElement(g,{span:8,key:s.id},e.createElement(Se,ue({},s))))):e.createElement(I,{image:I.PRESENTED_IMAGE_SIMPLE}))}users(){const{loading:t,result:n,error:u}=N(Ha,[]);return i.exports.useEffect(()=>{if(u)return h.error(u.message)},[u]),e.createElement(ke,{size:"small",title:null,loading:t},e.createElement(Pe,{title:"Users",value:(n==null?void 0:n.count)||0}),e.createElement(f.Text,{className:Ne.tip},"\u8FD17\u5929\u65B0\u589E\u7528\u6237 ",e.createElement("span",null,n==null?void 0:n.seven)," \u4EBA"))}packages(){const{loading:t,result:n,error:u}=N(Va,[]);return i.exports.useEffect(()=>{if(u)return h.error(u.message)},[u]),e.createElement(ke,{size:"small",title:null,loading:t},e.createElement(Pe,{title:"Packages",value:(n==null?void 0:n.count)||0}),e.createElement(f.Text,{className:Ne.tip},"\u8FD17\u5929\u65B0\u589E\u6A21\u5757 ",e.createElement("span",null,n==null?void 0:n.seven)," \u4E2A"))}stars(){const{loading:t,result:n,error:u}=N(Ya,[]);return i.exports.useEffect(()=>{if(u)return h.error(u.message)},[u]),e.createElement(ke,{size:"small",title:null,loading:t},e.createElement(Pe,{title:"Stars",value:(n==null?void 0:n.count)||0}),e.createElement(f.Text,{className:Ne.tip},"\u8FD17\u5929\u65B0\u589E\u6536\u85CF ",e.createElement("span",null,n==null?void 0:n.seven)," \u4E2A"))}downloads(){const{loading:t,result:n,error:u}=N(Ga,[]);return i.exports.useEffect(()=>{if(u)return h.error(u.message)},[u]),e.createElement(ke,{size:"small",title:null,loading:t},e.createElement(Pe,{title:"Downloads",value:(n==null?void 0:n.count)||0}),e.createElement(f.Text,{className:Ne.tip},"\u8FD17\u5929\u65B0\u589E\u4E0B\u8F7D ",e.createElement("span",null,n==null?void 0:n.seven)," \u6B21"))}};tt=Wa([z(),j("/"),X(G)],tt);const Za="_tip_7v3r5_1";var Ja={tip:Za};async function Xa(){return(await b.get("/setup/orm")).data}function eu(t){return b.put("/setup/orm",t)}const tu="_description_2yfl0_1",nu="_login_2yfl0_5",au="_content_2yfl0_12",uu="_version_2yfl0_15",ru="_desc_2yfl0_1",su="_active_2yfl0_25";var oe={description:tu,login:nu,content:au,version:uu,desc:ru,active:su};async function Ot(){return(await b.get("/configs")).data}function lu(t){return b.put("/configs",t)}async function cu(){return(await b.get("/plugin/logins")).data}var iu=Object.defineProperty,ou=Object.getOwnPropertyDescriptor,Tt=(t,n,u,r)=>{for(var a=r>1?void 0:r?ou(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&iu(n,u,a),a};let ie=class{constructor(){_(this,"TagTreeInput");_(this,"scopeButtonProps",{type:"link",icon:e.createElement($e,null)});_(this,"scopeInputProps",{placeholder:"\u8F93\u5165\u547D\u540D\u7A7A\u95F4\u540D\u79F0",prefix:"@",suffix:e.createElement(Ie,null)});_(this,"registryButtonProps",{type:"link",icon:e.createElement($e,null)});_(this,"registryInputProps",{placeholder:"\u8F93\u5165\u516C\u6709\u6E90\u5730\u5740\uFF0C\u4EE5 HTTP \u6216\u8005 HTTPS \u5F00\u5934",suffix:e.createElement(Ie,null)});_(this,"ipsButtonProps",{type:"link",icon:e.createElement($e,null)});_(this,"ipsInputProps",{placeholder:"\u8BF7\u8F93\u5165IP\u5730\u5740\uFF0C\u5982 127.0.0.1",suffix:e.createElement(Ie,null)});_(this,"pluginColSpan",12);_(this,"pluginDefaultLoginState",{name:"default",version:"1.0.0",description:"\u57FA\u4E8ENPM\u7684\u9ED8\u8BA4\u767B\u5F55\u65B9\u5F0F\uFF0C\u4EE5\u7528\u6237\u540D\u548C\u5BC6\u7801\u767B\u5F55\u4E3A\u4E3B\u3002",plugin_name:"NPM\u9ED8\u8BA4\u767B\u5F55",plugin_icon:e.createElement(se,{style:{backgroundColor:"#EA2039"},size:"large"},"DEFAULT"),nppm:!0})}render(){const t=v(this.config,this),n=Ce(this.TagTreeInput),u=v(this.logins,this),[r,a]=i.exports.useState(null),[s,l]=i.exports.useState([]),[c,m]=i.exports.useState([]),[d,o]=i.exports.useState("default"),[p,F]=i.exports.useState("packages"),[E,C]=i.exports.useState(!1),[A,T]=i.exports.useState(!0),[S,Z]=i.exports.useState([]),B=N(Ot,[]),U=$(lu),he=D=>{const k=s.slice(0);k.includes("@"+D)||(k.push("@"+D),l(k))},we=D=>{const k=s.slice(0),le=k.indexOf(D);le>-1&&(k.splice(le,1),l(k))},Ye=D=>{const k=c.slice(0);k.includes(D)||(k.unshift(D),m(k))},Ge=D=>{const k=c.slice(0),le=k.indexOf(D);le>-1&&(k.splice(le,1),m(k))},Ke=D=>{const k=S.slice(0);k.includes(D)||(k.push(D),Z(k))},R=D=>{const k=S.slice(0),le=k.indexOf(D);le>-1&&(k.splice(le,1),Z(k))},K=()=>{U.execute({domain:r,scopes:s,registries:c,login_code:d,dictionary:p,registerable:E,installable:A,ips:S}).then(()=>h.success("\u4FDD\u5B58\u914D\u7F6E\u6210\u529F")).catch(D=>h.error(D.message))};return i.exports.useEffect(()=>{B.result&&(a(B.result.domain),l(B.result.scopes),m(B.result.registries),o(B.result.login_code),F(B.result.dictionary),C(B.result.registerable),T(!!B.result.installable),Z(B.result.ips||[]))},[B.result]),e.createElement(x,{gutter:[24,32],style:{width:700}},e.createElement(t,{title:"\u7F51\u7AD9\u5730\u5740",description:"\u6B64\u9009\u9879\u5173\u7CFB\u5230\u6A21\u5757\u5305tgz\u6587\u4EF6\u7684\u4E0B\u8F7D\uFF0C\u6240\u4EE5\u4E3A\u5FC5\u586B\u9879\u3002\u4F60\u5FC5\u987B\u8BBE\u7F6E\u4E3A\u672C\u670D\u52A1\u53EF\u8BBF\u95EE\u57DF\u540D\u3002"},e.createElement(w,{value:r,onChange:D=>a(D.target.value),style:{width:500},placeholder:"\u8BF7\u8F93\u5165\u7F51\u7AD9\u57DF\u540D\u5730\u5740 HTTP \u6216 HTTPS \u5F00\u5934"})),e.createElement(t,{title:"\u6CE8\u518C",description:"\u5F00\u5173\uFF0C\u5173\u7CFB\u5230\u65B0\u6CE8\u518C\u7528\u6237\u662F\u5426\u53EF\u4EE5\u6CE8\u518CNPM\u9ED8\u8BA4\u6A21\u5F0F\uFF0C\u5373NPM\u7684\u8D26\u53F7\u5BC6\u7801\uFF0C\u7B2C\u4E09\u65B9\u767B\u5F55\u4E0D\u53D7\u5F71\u54CD\u3002\u5982\u679C\u5DF2\u6CE8\u518C\u7528\u6237\uFF0C\u5219\u4E0D\u5F71\u54CD\u767B\u5F55\u3002"},e.createElement(be,{checked:E,onChange:D=>C(D.target.checked)},"\u5F00\u653ENPM\u9ED8\u8BA4\u6CE8\u518C\u6A21\u5F0F")),e.createElement(t,{title:"\u5B89\u88C5\u6A21\u5757",description:"\u5F00\u5173\uFF0C\u5173\u7CFB\u5230\u662F\u5426\u5728\u672A\u767B\u5F55\u60C5\u51B5\u4E0B\u80FD\u591F\u5B89\u88C5\u6A21\u5757\u3002\u6B64\u529F\u80FD\u7ED3\u5408\u6CE8\u518C\u9009\u9879\u7528\u4E8E\u5C06\u672C\u7A0B\u5E8F\u642D\u5EFA\u5728\u5916\u7F51\u7684\u60C5\u51B5\u4E0B\u4FDD\u969C\u6A21\u5757\u4E0D\u88AB\u7A83\u53D6\u3002"},e.createElement(be,{checked:A,onChange:D=>T(D.target.checked)},"\u5141\u8BB8\u5F00\u653E\u5B89\u88C5\u6A21\u5757")),!A&&e.createElement(t,{title:"IP\u767D\u540D\u5355",description:"\u5728\u7981\u6B62\u975E\u767B\u5F55\u60C5\u51B5\u4E0B\u4E0B\u8F7D\u6A21\u5757\uFF0C\u53EF\u4EE5\u6307\u5B9AIP\u767D\u540D\u5355\u7ED5\u8FC7\u68C0\u6D4B\u673A\u5236\uFF0C\u5E38\u7528\u4E8E\u670D\u52A1\u5668\u7AEF\u7684\u5728\u7EBF\u7F16\u8BD1\u7B49\u7279\u6B8A\u573A\u666F\u3002"},e.createElement(n,{buttonText:"\u6DFB\u52A0IP\u767D\u540D\u5355",button:this.ipsButtonProps,input:this.ipsInputProps,dataSource:S,onAddone:Ke,onRemoveone:R,emptyText:"\u6682\u65E0IP\u767D\u540D\u5355",loading:B.loading})),e.createElement(t,{title:"\u7F51\u7AD9\u5141\u8BB8\u4F7F\u7528\u7684\u547D\u540D\u7A7A\u95F4",description:"\u53EF\u4F7F\u7528\u7684scope\u524D\u7F00\u3002\u6BD4\u5982@node\uFF0C\u90A3\u4E48\u8FD9\u4E2Ascope\u524D\u7F00\u7684\u6A21\u5757\u5C06\u53EF\u4EE5\u88AB\u63A5\u53D7\u3002\u5982\u679C\u7BA1\u7406\u5458\u8BBE\u5B9A\u7528\u6237\u81EA\u8EAB\u7684scope\u524D\u7F00\uFF0C\u5C06\u4F1A\u4E0E\u6B64\u9879\u7EC4\u5408\u540E\u5224\u65AD\u662F\u5426\u63A5\u53D7\u3002"},e.createElement(n,{buttonText:"\u6DFB\u52A0\u547D\u540D\u7A7A\u95F4",button:this.scopeButtonProps,input:this.scopeInputProps,dataSource:s,onAddone:he,onRemoveone:we,emptyText:"\u6682\u65E0\u547D\u540D\u7A7A\u95F4",loading:B.loading})),e.createElement(t,{title:"\u7F51\u7AD9\u5141\u8BB8\u4F7F\u7528\u7684\u516C\u6709\u6E90",description:"\u5728\u975E\u79C1\u6709\u6A21\u5757\u88AB\u8BF7\u6C42\u7684\u65F6\u5019\uFF0C\u5C06\u6309\u7167\u6211\u4EEC\u8BBE\u7F6E\u7684\u540C\u6B65\u6E90\u53BB\u83B7\u53D6\u6A21\u5757\u4FE1\u606F\u3002\u6B64\u9879\u5177\u6709\u987A\u5E8F\u6027\uFF0C\u6839\u636E\u987A\u5E8F\u5C06\u81EA\u52A8\u83B7\u53D6\u6A21\u5757\u4FE1\u606F\u3002"},e.createElement(n,{buttonText:"\u6DFB\u52A0\u5171\u6709\u6E90",button:this.registryButtonProps,input:this.registryInputProps,dataSource:c,onAddone:Ye,onRemoveone:Ge,emptyText:"\u6682\u65E0\u516C\u6709\u6E90",loading:B.loading})),e.createElement(t,{title:"\u53D1\u5E03\u5305\u6587\u4EF6\u4FDD\u5B58\u6587\u4EF6\u5939\u5730\u5740",description:"\u4E00\u65E6\u521D\u671F\u8BBE\u5B9A\u597D\u8FD9\u4E2A\u53D8\u91CF\uFF0C\u5EFA\u8BAE\u4E0D\u8981\u66F4\u6362\uFF0C\u4EE5\u514D\u5F71\u54CD\u4F7F\u7528\u3002\u76EE\u524D\u8FD8\u6CA1\u6709\u5B9E\u73B0\u4FEE\u6B63\u8FD9\u4E2A\u76EE\u5F55\u529F\u80FD\u3002"},e.createElement(w,{value:p,onChange:D=>F(D.target.value),placeholder:"\u8BF7\u8F93\u5165\u5305\u5B58\u5728\u6587\u4EF6\u5939\u5730\u5740"})),e.createElement(t,{title:"\u9009\u62E9NPM\u547D\u4EE4\u884C\u9ED8\u8BA4\u767B\u5F55\u65B9\u5F0F"},e.createElement(u,{value:d,onChange:o})),e.createElement(g,{span:24},e.createElement(H,{type:"primary",onClick:K,loading:U.loading,disabled:B.loading},"\u4FDD\u5B58\u914D\u7F6E")))}config(t){return e.createElement(g,{span:24},e.createElement(M,{direction:"vertical",style:{width:"100%"}},e.createElement(y,{blocked:!0,align:"between",valign:"middle"},e.createElement(y,{span:1,scroll:"hide",style:{marginRight:24}},e.createElement(f.Text,{ellipsis:!0},t.title)),t.extra),!!t.description&&t.descriptionPosition==="top"&&e.createElement("div",{className:oe.description},t.description),e.createElement("div",null,t.children),!!t.description&&t.descriptionPosition!=="top"&&e.createElement("div",{className:oe.description},t.description)))}logins(t){const n=v(this.login,this),{loading:u,result:r,error:a}=N(cu,[]);return i.exports.useEffect(()=>{if(a)return h.error(a.message)},[a]),e.createElement(V,{spinning:u},e.createElement(x,{gutter:[24,24]},e.createElement(g,{span:this.pluginColSpan},e.createElement(n,{dataSource:this.pluginDefaultLoginState,current:t.value,onChange:t.onChange})),(r||[]).map(s=>e.createElement(g,{span:this.pluginColSpan,key:s.name},e.createElement(n,{dataSource:s,current:t.value,onChange:t.onChange})))))}login(t){return e.createElement(y,{blocked:!0,className:W(oe.login,{[oe.active]:t.dataSource.name===t.current}),onClick:()=>t.onChange(t.dataSource.name)},typeof t.dataSource.plugin_icon=="string"?e.createElement(se,{size:"large",src:t.dataSource.plugin_icon}):t.dataSource.plugin_icon,e.createElement(y,{span:1,scroll:"hide",direction:"column",className:oe.content},e.createElement(f.Text,{ellipsis:!0,title:t.dataSource.plugin_name},t.dataSource.plugin_name),e.createElement("div",{className:oe.version},t.dataSource.name,"@",t.dataSource.version),e.createElement(f.Paragraph,{ellipsis:{rows:2},className:oe.desc},t.dataSource.description)))}};Tt([ae(Le)],ie.prototype,"TagTreeInput",2);ie=Tt([z(),j("/admin/setting/base"),X(G,{login:!0,admin:!0})],ie);var mu=Object.defineProperty,du=Object.getOwnPropertyDescriptor,ot=(t,n,u,r)=>{for(var a=r>1?void 0:r?du(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&mu(n,u,a),a};let Be=class{constructor(){_(this,"ORMSetup");_(this,"AdminBaseSetting");_(this,"text",`
    \u4FEE\u6539\u6570\u636E\u5E93\u8FDE\u63A5\u53C2\u6570\u5C06\u81EA\u52A8\u91CD\u65B0\u8FDE\u63A5\u6570\u636E\u5E93\uFF0C\u7CFB\u7EDF\u5C06\u6709\u79D2\u7EA7\u95EA\u65AD\uFF0C\u8BF7\u614E\u91CD\u4FEE\u6539\uFF01
    \u5982\u679C\u4FEE\u6539\u7684\u4E3A\u4E00\u4E2A\u65B0\u5E93\u5C06\u4E22\u5931\u539F\u6709\u6570\u636E\uFF0C\u5EFA\u8BAE\u5728\u5B89\u88C5\u5B8C\u6BD5\u540E\u4E0D\u8981\u4FEE\u6539\u6570\u636E\u5E93\uFF0C\u4EE5\u514D\u9020\u6210\u4E0D\u5FC5\u8981\u7684\u635F\u5931\uFF01
    \u5982\u679C\u60A8\u5DF2\u505A\u597D\u5907\u4EFD\u6216\u8005\u505A\u597D\u4E22\u5931\u6570\u636E\u51C6\u5907\uFF0C\u90A3\u4E48\u8BF7\u7EE7\u7EED\u4FEE\u6539\u64CD\u4F5C\uFF01
  `)}render(){const t=N(Xa,[]),n=$(eu),[u,r]=i.exports.useState("mysql"),[a,s]=i.exports.useState(null),[l,c]=i.exports.useState(null),[m,d]=i.exports.useState(null),[o,p]=i.exports.useState(null),[F,E]=i.exports.useState(null),C=v(this.AdminBaseSetting.config,this.AdminBaseSetting),A=i.exports.useMemo(()=>t.loading||n.loading,[t.loading,n.loading]),T=i.exports.useMemo(()=>!(!u||!this.ORMSetup.dataBaseTypes.map(B=>B.value).includes(u)||!a||!l||l<0||!m||!o||!F),[u,a,l,m,o,F]),S=()=>{n.execute({type:u,host:a,port:l,username:m,password:o,database:F}).then(()=>h.success("\u66F4\u65B0\u6570\u636E\u5E93\u6210\u529F")).catch(B=>h.error(B.message))};i.exports.useEffect(()=>{t.result&&(r(t.result.type),s(t.result.host),c(t.result.port),d(t.result.username),p(t.result.password),E(t.result.database))},[t.result]);const Z=i.exports.useMemo(()=>this.ORMSetup.dataBaseTypes.map(B=>B.label).join(", "),[]);return e.createElement(x,{gutter:[24,24]},e.createElement(g,{span:24},e.createElement("div",{className:Ja.tip},e.createElement(xt,null)," ",this.text)),e.createElement(C,{title:e.createElement(Y,{status:"error",text:"\u7C7B\u578B"}),description:"\u9009\u62E9\u60A8\u5E0C\u671B\u521B\u5EFA\u7684\u6570\u636E\u5E93\u7C7B\u578B\uFF0C\u6211\u4EEC\u652F\u6301\u7684\u7C7B\u578B\u6709 "+Z+"\uFF0C\u8BF7\u9009\u62E9\u5176\u4E00\u3002"},e.createElement(de,{disabled:A,options:this.ORMSetup.dataBaseTypes,value:u,onChange:B=>r(B)})),e.createElement(C,{title:e.createElement(Y,{status:"error",text:"\u5730\u5740"}),description:"\u8FDE\u63A5\u5730\u5740\uFF0C\u4E00\u822C\u4EE5IP\u4E3A\u4E3B\uFF0C\u8BF7\u6B63\u786E\u586B\u5199 \u4F8B\u5982 127.0.0.1"},e.createElement(w,{disabled:A,value:a,onChange:B=>s(B.target.value),placeholder:"\u4F8B\u5982 127.0.0.1",style:{width:400}})),e.createElement(C,{title:e.createElement(Y,{status:"error",text:"\u7AEF\u53E3"}),description:"\u8BF7\u5199\u5165\u7AEF\u53E3\uFF0C\u4F8B\u5982 8642"},e.createElement(Ee,{disabled:A,value:l,onChange:B=>c(B),placeholder:"\u4F8B\u5982 8642",step:1,min:3e3,style:{width:120}})),e.createElement(C,{title:e.createElement(Y,{status:"error",text:"\u8D26\u53F7"}),description:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u7684\u4F7F\u7528\u8005\u8D26\u53F7"},e.createElement(w,{disabled:A,value:m,onChange:B=>d(B.target.value),placeholder:"\u4F8B\u5982 admin",style:{width:180}})),e.createElement(C,{title:e.createElement(Y,{status:"error",text:"\u5BC6\u7801"}),description:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u7684\u5BC6\u7801"},e.createElement(w,{disabled:A,value:o,onChange:B=>p(B.target.value),placeholder:"\u4F8B\u5982 admin888",type:"password",style:{width:180}})),e.createElement(C,{title:e.createElement(Y,{status:"error",text:"\u540D\u79F0"}),description:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u7684\u540D\u79F0"},e.createElement(w,{disabled:A,value:F,onChange:B=>E(B.target.value),placeholder:"\u4F8B\u5982 mysql_database",style:{width:180}})),e.createElement(g,{span:24},e.createElement(H,{type:"primary",onClick:S,disabled:!T,loading:A},"\u4FDD\u5B58")))}};ot([ae(qe)],Be.prototype,"ORMSetup",2);ot([ae(ie)],Be.prototype,"AdminBaseSetting",2);Be=ot([z(),j("/admin/setting/orm"),X(G,{login:!0,admin:!0})],Be);const Eu="_tip_7v3r5_1";var gu={tip:Eu};async function pu(){return(await b.get("/setup/redis")).data}function hu(t){return b.put("/setup/redis",t)}var Fu=Object.defineProperty,fu=Object.getOwnPropertyDescriptor,Mt=(t,n,u,r)=>{for(var a=r>1?void 0:r?fu(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&Fu(n,u,a),a};let je=class{constructor(){_(this,"AdminBaseSetting");_(this,"text","\u4FEE\u6539`Redis`\u8FDE\u63A5\u53C2\u6570\u5C06\u81EA\u52A8\u91CD\u65B0\u8FDE\u63A5`Redis`\uFF0C\u7CFB\u7EDF\u5C06\u6709\u79D2\u7EA7\u95EA\u65AD\uFF0C\u8BF7\u614E\u91CD\u4FEE\u6539\uFF01")}render(){const t=N(pu,[]),n=$(hu),[u,r]=i.exports.useState(null),[a,s]=i.exports.useState(null),[l,c]=i.exports.useState(null),[m,d]=i.exports.useState(null),o=v(this.AdminBaseSetting.config,this.AdminBaseSetting),p=i.exports.useMemo(()=>t.loading||n.loading,[t.loading,n.loading]),F=i.exports.useMemo(()=>!(!u||!a||a<0||m&&m<0),[u,a,l,m]),E=()=>{n.execute({host:u,port:a,password:l,db:m}).then(()=>h.success("\u66F4\u65B0`Redis`\u6210\u529F")).catch(C=>h.error(C.message))};return i.exports.useEffect(()=>{t.result&&(r(t.result.host),s(t.result.port),c(t.result.password),d(t.result.db))},[t.result]),e.createElement(x,{gutter:[24,32],style:{width:700}},e.createElement(g,{span:24},e.createElement("div",{className:gu.tip},e.createElement(xt,null)," ",this.text)),e.createElement(o,{title:e.createElement(Y,{status:"error",text:"\u94FE\u63A5\u5730\u5740"}),description:"\u8FDE\u63A5\u5730\u5740\uFF0C\u4E00\u822C\u4EE5IP\u4E3A\u4E3B\uFF0C\u8BF7\u6B63\u786E\u586B\u5199 \u4F8B\u5982 127.0.0.1"},e.createElement(w,{disabled:p,value:u,onChange:C=>r(C.target.value),placeholder:"\u4F8B\u5982 127.0.0.1",style:{width:500}})),e.createElement(o,{title:e.createElement(Y,{status:"error",text:"\u7AEF\u53E3"}),description:"\u9ED8\u8BA4`Redis`\u7AEF\u53E3\u4E3A6379\uFF0C\u5982\u679C\u60A8\u81EA\u5B9A\u4E49\u4E86\u7AEF\u53E3\uFF0C\u8BF7\u5199\u5165\u7AEF\u53E3\uFF0C\u4F8B\u5982 8642"},e.createElement(Ee,{disabled:p,value:a,onChange:C=>s(C),placeholder:"\u4F8B\u5982 8642",step:1,min:3e3,style:{width:120}})),e.createElement(o,{title:"\u5BC6\u7801",description:"\u5982\u679C\u60A8\u8BBE\u7F6E\u4E86`Redis`\u767B\u5F55\u5BC6\u7801\uFF0C\u8BF7\u8F93\u5165\uFF0C\u4F8B\u5982 admin888"},e.createElement(w,{disabled:p,value:l,onChange:C=>c(C.target.value),placeholder:"\u4F8B\u5982 admin888",type:"password",style:{width:180}})),e.createElement(o,{title:"\u901A\u9053\u7D22\u5F15",description:"\u4E00\u822C\u7684\uFF0C\u60A8\u53EF\u4EE5\u9009\u62E9`Redis`\u5B58\u50A8\u901A\u9053\uFF0C\u5B83\u662F\u4E00\u4E2A\u6570\u5B57\uFF0C\u4F8B\u5982 0"},e.createElement(Ee,{disabled:p,value:m,onChange:C=>d(C),placeholder:"\u4F8B\u5982 0 \u9009\u586B",step:1,min:0,style:{width:120}})),e.createElement(g,{span:24},e.createElement(H,{type:"primary",loading:p,onClick:E,disabled:!F},"\u4FDD\u5B58")))}};Mt([ae(ie)],je.prototype,"AdminBaseSetting",2);je=Mt([z(),j("/admin/setting/redis"),X(G,{login:!0,admin:!0})],je);const vu="_content_aqbx2_1",_u="_user_aqbx2_7",Cu="_info_aqbx2_15",bu="_name_aqbx2_18",yu="_email_aqbx2_23";var Oe={content:vu,user:_u,info:Cu,name:bu,email:yu};async function Bu(t){return(await b.get("/users",{params:t})).data}var Du=Object.defineProperty,xu=Object.getOwnPropertyDescriptor,Su=(t,n,u,r)=>{for(var a=r>1?void 0:r?xu(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&Du(n,u,a),a};let nt=class{constructor(){_(this,"size",8)}render(){const t=v(this.user,this),[n,u]=i.exports.useState(1),[r,a]=i.exports.useState(15),[s,l]=i.exports.useState(null),{loading:c,result:m,error:d}=N(()=>Bu({page:n,size:r,keyword:s}),[n,r,s]),o=(p,F)=>{u(p),a(F)};return i.exports.useEffect(()=>{if(d)return h.error(d.message)},[d]),e.createElement(x,{gutter:[24,24]},e.createElement(g,{span:24},e.createElement(y,{align:"between",valign:"middle"},e.createElement(xe,{showSizeChanger:!1,current:n,pageSize:r,total:m?m[1]:0,onChange:o}),e.createElement(w.Search,{onSearch:p=>l(p),onChange:p=>!p.target.value&&l(void 0),placeholder:"\u641C\u7D22\u5173\u952E\u8D26\u53F7\u6216\u8005\u6635\u79F0",style:{width:250}}))),e.createElement(g,{span:24},e.createElement(V,{spinning:c},e.createElement(x,{gutter:[16,16]},(m||[[],0])[0].map(p=>e.createElement(g,{span:this.size,key:p.id},e.createElement(t,{dataSource:p})))))))}user(t){return e.createElement(y,{className:Oe.user,onClick:()=>O("/user/"+t.dataSource.account)},e.createElement(se,{src:t.dataSource.avatar,size:"large"}),e.createElement(y,{span:1,className:Oe.info,direction:"column",scroll:"hide"},e.createElement(f.Text,{ellipsis:!0,className:Oe.name,title:t.dataSource.nickname+"("+t.dataSource.account+")"},t.dataSource.nickname," ",e.createElement("span",null,"(",t.dataSource.account,")")),e.createElement(f.Text,{ellipsis:!0,className:Oe.email,title:t.dataSource.email},t.dataSource.email)))}};nt=Su([z(),j("/admin/users"),X(G,{login:!0,admin:!0})],nt);const wu="_head_aqy4f_1",Au="_user_aqy4f_4",ku="_info_aqy4f_4",Pu="_nickname_aqy4f_7",Nu="_account_aqy4f_13",Ou="_email_aqy4f_20",Tu="_switcherTitle_aqy4f_24";var me={head:wu,user:Au,info:ku,nickname:Pu,account:Nu,email:Ou,switcherTitle:Tu};async function Mu(t){return(await b.get(`/user/${t}`)).data}function $u(t,n){return b.put(`/user/${t}/admin`,{value:n})}function Iu(t,n){return b.put(`/user/${t}/forbidden`,{value:n})}function zu(t,n){return b.put("/user/"+t+"/scopes",n)}async function Ru(t,n){return(await b.get("/user/"+t+"/packages",{params:n})).data}var Lu=Object.defineProperty,qu=Object.getOwnPropertyDescriptor,mt=(t,n,u,r)=>{for(var a=r>1?void 0:r?qu(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&Lu(n,u,a),a};let De=class{constructor(){_(this,"TagTreeInput");_(this,"AdminBaseSetting");_(this,"scopeButtonProps",{type:"primary",icon:e.createElement($e,null)});_(this,"scopeInputProps",{placeholder:"\u8F93\u5165\u547D\u540D\u7A7A\u95F4\u540D\u79F0",prefix:"@",suffix:e.createElement(Ie,null)});_(this,"conditions",[{label:"\u6211\u53D1\u8D77\u7684\u6A21\u5757",value:0},{label:"\u6211\u53C2\u4E0E\u7684\u6A21\u5757",value:1}]);_(this,"pageSizeOptions",["9","15","30","60"])}render(){const t=Ce(this.TagTreeInput),n=v(this.AdminBaseSetting.config,this.AdminBaseSetting),u=v(this.switcher,this),r=i.exports.useContext(ge),a=v(this.user,this),s=ze("id",r.account),{loading:l,result:c,error:m}=N(Mu,[s]),[d,o]=i.exports.useState([]),[p,F]=i.exports.useState(this.conditions[0].value),[E,C]=i.exports.useState(1),[A,T]=i.exports.useState(15),[S,Z]=i.exports.useState(null),B=$(zu),U=N(()=>{if(c==null?void 0:c.id)return Ru(c.id,{page:E,size:A,keyword:S,type:p})},[c==null?void 0:c.id,E,A,S,p]),he=U&&U.result&&U.result[0]?U.result[0]:[],we=U&&U.result&&U.result[1]?U.result[1]:0,Ye=R=>{if(c==null?void 0:c.id){const K=d.slice(0);K.indexOf("@"+R)===-1&&(K.push("@"+R),B.execute(c.id,K).then(()=>o(K)).then(()=>h.success("\u66F4\u65B0\u6210\u529F")).catch(D=>h.error(D.message)))}},Ge=R=>{if(c==null?void 0:c.id){const K=d.slice(0),D=K.indexOf(R);D>-1&&(K.splice(D,1),B.execute(c.id,K).then(()=>o(K)).then(()=>h.success("\u66F4\u65B0\u6210\u529F")).catch(k=>h.error(k.message)))}},Ke=(R,K)=>{C(R),T(K)};return i.exports.useEffect(()=>o((c==null?void 0:c.scopes)||[]),[c==null?void 0:c.scopes]),i.exports.useEffect(()=>{if(m)return h.error(m.message)},[m]),i.exports.useEffect(()=>{if(U.error)return h.error(U.error.message)},[U.error]),e.createElement(V,{spinning:l},e.createElement(x,{gutter:[24,24]},e.createElement(g,{span:24},e.createElement(y,{blocked:!0},e.createElement(y,{span:1,scroll:"hide"},e.createElement(a,ue({},c))),e.createElement(y,{direction:"column",valign:"bottom"},e.createElement(u,{disabled:!r.admin||(r==null?void 0:r.id)===(c==null?void 0:c.id),title:"\u7BA1\u7406\u5458",feedback:$u,uid:c==null?void 0:c.id,value:!!(c==null?void 0:c.admin),okText:"\u662F",noText:"\u5426"}),e.createElement(u,{disabled:!r.admin||(r==null?void 0:r.id)===(c==null?void 0:c.id),title:"\u767B\u5F55\u9650\u5236",feedback:Iu,uid:c==null?void 0:c.id,value:!!(c==null?void 0:c.login_forbiden),okText:"\u5141",noText:"\u7981",reverse:!0})))),e.createElement(g,{span:24},e.createElement(n,{title:"\u6211\u7684\u547D\u540D\u7A7A\u95F4",description:"\u7528\u6237\u5355\u72EC\u53EF\u4F7F\u7528\u7684scope\u524D\u7F00\u3002\u6BD4\u5982@node\uFF0C\u90A3\u4E48\u8FD9\u4E2Ascope\u524D\u7F00\u7684\u6A21\u5757\u5C06\u53EF\u4EE5\u88AB\u63A5\u53D7\u3002\u5982\u679C\u7BA1\u7406\u5458\u8BBE\u5B9A\u7CFB\u7EDF\u7684scope\u524D\u7F00\uFF0C\u5C06\u4F1A\u4E0E\u6B64\u9879\u7EC4\u5408\u540E\u5224\u65AD\u662F\u5426\u63A5\u53D7\u3002",descriptionPosition:"top"},e.createElement(t,{disabled:!(r==null?void 0:r.admin),loading:B.loading,dataSource:d,onAddone:Ye,onRemoveone:Ge,button:this.scopeButtonProps,input:this.scopeInputProps,emptyText:"\u6682\u65E0\u547D\u540D\u7A7A\u95F4",buttonText:"\u6DFB\u52A0\u547D\u540D\u7A7A\u95F4"}))),e.createElement(g,{span:24},e.createElement(n,{title:`\u6211\u7684\u6A21\u5757(${we})`,extra:e.createElement(M,null,e.createElement(de,{options:this.conditions,value:p,onChange:R=>F(R)}),e.createElement(w.Search,{placeholder:"\u641C\u7D22\u6A21\u5757\u7684\u5173\u952E\u5B57...",onSearch:R=>Z(R),onChange:R=>{R.target.value||Z(null)}}))},e.createElement(V,{spinning:U.loading},e.createElement(x,{gutter:[24,24]},he.length?he.map(R=>e.createElement(g,{span:8,key:R.id},e.createElement(Se,ue({},R)))):e.createElement(g,{span:24},e.createElement(I,{image:I.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65E0\u6A21\u5757"})),!!he.length&&e.createElement(g,{span:24},e.createElement(xe,{showSizeChanger:!0,current:E,pageSize:A,total:we,onChange:Ke,pageSizeOptions:this.pageSizeOptions}))))))))}user(t){return e.createElement(y,{blocked:!0,className:me.user},e.createElement(se,{src:t==null?void 0:t.avatar,size:44,className:me.avatar}),e.createElement(y,{scroll:"hide",direction:"column",className:me.info,span:1},e.createElement(f.Text,{ellipsis:!0,className:me.nickname,title:t==null?void 0:t.nickname},t==null?void 0:t.nickname,e.createElement(f.Text,{className:me.account,copyable:{text:t==null?void 0:t.account}},e.createElement(Me,null)," ",t==null?void 0:t.account)),e.createElement(f.Text,{ellipsis:!0,className:me.email,title:t==null?void 0:t.email},e.createElement(f.Link,{href:"mailto:"+t.email,target:"_blank"},e.createElement(sn,null)," ",t==null?void 0:t.email),e.createElement(ee,{type:"vertical"}),e.createElement(te,{title:"\u6CE8\u518C\u65B9\u5F0F"},e.createElement(ln,null)," ",t.login_code==="default"?"NPM\u9ED8\u8BA4":t.login_code),e.createElement(ee,{type:"vertical"}),e.createElement(te,{title:"\u6CE8\u518C\u65F6\u95F4"},e.createElement(cn,null)," ",ye(t.gmt_create).format("YYYY-MM-DD HH:mm:ss")))))}switcher(t){const[n,u]=i.exports.useState(!1),{loading:r,execute:a}=$(t.feedback),s=()=>{if(!t.uid)return h.warn("\u672A\u77E5\u7528\u6237");t.disabled||a(t.uid,t.reverse?n:!n).then(()=>u(!n)).then(()=>h.success("\u66F4\u65B0\u6210\u529F")).catch(l=>h.error(l.message))};return i.exports.useEffect(()=>u(t.reverse?!t.value:t.value),[t.value,t.reverse]),e.createElement(M,null,e.createElement("span",{className:me.switcherTitle},t.title),e.createElement(St,{disabled:t.disabled,size:"small",loading:r,checked:n,onChange:s,checkedChildren:t.okText,unCheckedChildren:t.noText}))}};mt([ae(Le)],De.prototype,"TagTreeInput",2);mt([ae(ie)],De.prototype,"AdminBaseSetting",2);De=mt([z(),j("/user"),j("/user/:id"),X(G,{login:!0})],De);const ju="_markdown_p28so_1",Uu="_keywords_p28so_43",Hu="_head_p28so_46",Vu="_left_p28so_49",Yu="_pathname_p28so_52",Gu="_desc_p28so_56",Ku="_time_p28so_64",Qu="_right_p28so_67",Wu="_description_p28so_73",Zu="_buttons_p28so_81",Ju="_item_p28so_85",Xu="_tags_p28so_88",er="_tag_p28so_88",tr="_version_p28so_91",nr="_alias_p28so_91",ar="_like_p28so_95",ur="_likeText_p28so_95",rr="_likeCount_p28so_98",sr="_likeIcon_p28so_109",lr="_maintainers_p28so_112",cr="_maintainer_p28so_112",ir="_email_p28so_119",or="_clickable_p28so_123",mr="_dep_p28so_126";var P={markdown:ju,keywords:Uu,head:Hu,left:Vu,pathname:Yu,desc:Gu,time:Ku,right:Qu,description:Wu,buttons:Zu,item:Ju,tags:Xu,tag:er,version:tr,alias:nr,like:ar,likeText:ur,likeCount:rr,likeIcon:sr,maintainers:lr,maintainer:cr,email:ir,clickable:or,dep:mr},dr=Object.defineProperty,Er=Object.getOwnPropertyDescriptor,gr=(t,n,u,r)=>{for(var a=r>1?void 0:r?Er(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&dr(n,u,a),a};const{Option:pr}=de,{TabPane:Te}=He,hr=e.createContext("Light"),Fr=e.createContext("Bamboo");let at=class{render(){const t=ze("scope"),n=ze("pkg"),u=ze("version"),r=i.exports.useMemo(()=>t?"@"+t+"/"+n:n,[t,n]),{loading:a,result:s,error:l}=N(Nt,[r]),c=i.exports.useMemo(()=>s?u||s["dist-tags"].latest:null,[u,s]),m=i.exports.useMemo(()=>s?s.versions[c]:null,[c,s]),d=i.exports.useMemo(()=>this.getVersions(s),[s]),o=v(this.readmeArea,this),p=v(this.title,this),F=v(this.versions,this),E=v(this.keywords,this),C=v(this.maintainers,this),A=v(this.deps,this),T=ne("tab","readme"),S=Je(Z=>Z.pathname);return e.createElement(V,{spinning:a,style:{minHeight:200},tip:"\u52A0\u8F7D\u516C\u6709\u6A21\u5757\u4F1A\u6BD4\u8F83\u7F13\u6162\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5F85..."},l?e.createElement(I,{image:I.PRESENTED_IMAGE_SIMPLE,description:l.message}):e.createElement(x,{gutter:[12,24]},e.createElement(g,{span:24},!!m&&e.createElement(p,{isNppm:!!s._nppm,current:c,version:m,versions:d,time:ye(s.time[m.version]).format("YYYY-MM-DD HH:mm:ss")})),e.createElement(g,{span:24},e.createElement(He,{activeKey:T,onChange:Z=>O(S+"?tab="+Z)},e.createElement(Te,{tab:"\u6587\u6863",key:"readme"},!!s&&e.createElement(o,Fe(ue({},s),{extra:!!m&&!!m.keywords&&!!m.keywords.length&&e.createElement(E,{dataSource:m.keywords,isPrivate:!!s._nppm})}))),e.createElement(Te,{tab:"\u7248\u672C",key:"versions"},!!s&&e.createElement(F,{dataSource:s})),e.createElement(Te,{tab:"\u4F9D\u8D56",key:"dependencies"},!!m&&e.createElement(A,{dataSource:(m==null?void 0:m.dependencies)||{}})),e.createElement(Te,{tab:"\u8D21\u732E\u8005",key:"maintainers"},!!m&&e.createElement(C,{name:r,maintainers:(m==null?void 0:m.maintainers)||[]}))))))}versions(t){const n=i.exports.useMemo(()=>this.getVersions(t.dataSource,!0),[t.dataSource]),u=i.exports.useMemo(()=>this.versionColumns(t.dataSource.name),[t.dataSource.name]);return e.createElement(wt,{pagination:!1,dataSource:n,columns:u,rowKey:r=>r.value+":"+r.alias})}keywords(t){return e.createElement(i.exports.Fragment,null,e.createElement(f.Title,{level:2,style:{marginTop:24}},"Keywords"),e.createElement(f.Paragraph,{className:P.keywords},t.dataSource.map(n=>e.createElement(f.Link,{key:n,onClick:()=>O("/search?q="+n+"&t="+(t.isPrivate?"private":"public"))},n))))}maintainers(t){const{result:n,error:u}=N(ga,[t.name]),r=i.exports.useMemo(()=>n&&n.length?n:(t.maintainers||[]).map(a=>Object.assign(a,{avatar:At.url(a.email),public:!0})),[n]);return i.exports.useEffect(()=>{if(u)return h.error(u.message)},[u]),e.createElement(x,{className:P.maintainers,gutter:[24,24]},r.length?r.map(a=>e.createElement(g,{span:6,key:a.name},e.createElement(y,{blocked:!0,className:W(P.maintainer,{[P.clickable]:!a.public}),onClick:()=>!a.public&&O("/user/"+a.name)},e.createElement(se,{src:a.avatar,size:38}),e.createElement(y,{span:1,scroll:"hide",direction:"column"},e.createElement(f.Text,{ellipsis:!0},a.name),e.createElement(f.Text,{ellipsis:!0,className:P.email},a.email))))):e.createElement(I,{description:"\u6B64\u6A21\u5757\u65E0\u8D21\u732E\u8005",image:I.PRESENTED_IMAGE_SIMPLE,style:{width:"100%"}}))}deps(t){const n=i.exports.useMemo(()=>t.dataSource?Object.keys(t.dataSource).map(r=>({label:r,value:t.dataSource[r]})):[],[t==null?void 0:t.dataSource]);return e.createElement(x,{gutter:[24,8]},n.length?n.map(u=>e.createElement(g,{span:6,key:u.label},e.createElement(f.Link,{ellipsis:!0,title:u.label,className:P.dep,style:{marginRight:24},onClick:()=>O("/package/"+u.label)},u.label))):e.createElement(I,{description:"\u6B64\u6A21\u5757\u65E0\u4F9D\u8D56",image:I.PRESENTED_IMAGE_SIMPLE,style:{width:"100%"}}))}versionColumns(t){return[{title:"\u7248\u672C\u53F7",dataIndex:"label",className:"number",render(n){return e.createElement(f.Link,{onClick:()=>O(`/package/${t}/v/${n}`)},n)}},{title:"\u522B\u540D",dataIndex:"alias",className:"number"},{title:"\u53D1\u5E03\u65F6\u95F4",dataIndex:"time",width:200,className:"number",render(n){return ye(n).format("YYYY-MM-DD HH:mm:ss")}}]}getVersions(t,n){if(!t)return[];const u=[],r=[];if(t["dist-tags"])for(const a in t["dist-tags"])u.push({label:t["dist-tags"][a],value:t["dist-tags"][a],alias:a,time:n?t.time[t["dist-tags"][a]]:void 0}),r.push(t["dist-tags"][a]);return u.push(...Object.keys(t.versions).filter(a=>!r.includes(a)).map(a=>({label:a,value:a,time:n?t.time[a]:void 0})).sort()),u}readmeArea(t){return e.createElement("div",{className:P.markdown},e.createElement(on,{rehypePlugins:[mn,dn,En],remarkPlugins:[gn]},t.readme||"No Readme"),t.extra)}title(t){var s;const n=v(this.star,this),u=v(this.transfer,this),[r,a]=i.exports.useState(t.current);return i.exports.useEffect(()=>a(t.current),[t.current]),e.createElement(M,{direction:"vertical",style:{width:"100%"},size:8},e.createElement(y,{align:"between",valign:"middle",blocked:!0,direction:"row",className:P.head,scroll:"hide"},e.createElement(y,{span:1,scroll:"hide",direction:"row",className:P.left,valign:"middle"},e.createElement(M,{className:P.pathname},t.version.name),e.createElement(y,{scroll:"hide",className:P.desc,valign:"middle"},e.createElement(Q,{color:"volcano"},"@",t.version.version),e.createElement(f.Text,{className:P.time,copyable:{text:`npm i ${t.version.name} --registry=${window.location.origin}`}},t.time," Published"))),e.createElement(y,{className:P.right,valign:"middle"},e.createElement(M,{align:"center"},e.createElement(de,{value:r,onChange:l=>O("/package/"+t.version.name+"/v/"+l)},t.versions.map(l=>e.createElement(pr,{value:l.value,key:l.value},e.createElement(y,{align:"between",valign:"middle",style:{columnGap:24},title:l.label,className:P.version},e.createElement("span",null,"v",l.label),e.createElement("span",{className:P.alias},l.alias?"@"+l.alias:null))))),!!t.isNppm&&e.createElement(n,{pkg:t.version.name}),!!t.isNppm&&!!t.version&&e.createElement(u,{name:t.version.name})))),(!!t.version.license||!!t.version.homepage||!!t.version.repository)&&e.createElement(M,{className:P.buttons,size:8},!!t.version.license&&e.createElement("div",{className:P.item},e.createElement(pn,null)," ",e.createElement(f.Link,{href:hn(t.version.license),target:"_blank"},t.version.license)),!!t.version.homepage&&e.createElement("div",{className:P.item},e.createElement(Fn,null)," ",e.createElement(f.Link,{href:t.version.homepage,target:"_blank"},t.version.homepage)),!!t.version.repository&&t.version.repository.url&&e.createElement("div",{className:P.item},e.createElement(fn,null)," ",e.createElement(f.Link,{ellipsis:!0,href:t.version.repository.url.replace(/^[^\+]+\+/,""),target:"_blank"},t.version.repository.url.replace(/^[^\+]+\+/,"")))),!!((s=t==null?void 0:t.version)==null?void 0:s.description)&&e.createElement(f.Paragraph,{ellipsis:{rows:2},className:P.description,title:t.version.description},t.version.description))}star(t){var l,c;const n=N(ha,[t.pkg]),u=$(pa),r=!!((l=n==null?void 0:n.result)==null?void 0:l.status),a=((c=n==null?void 0:n.result)==null?void 0:c.count)||0,s=()=>{const m=!n.result.status;u.execute(t.pkg,m).then(()=>n.execute(t.pkg)).then(()=>h.success(m?"\u6536\u85CF\u6210\u529F":"\u53D6\u6D88\u6536\u85CF\u6210\u529F")).catch(d=>h.error(d.message))};return i.exports.useEffect(()=>{if(n.error)return h.error(n.error.message)},[n.error]),e.createElement(V,{spinning:!!n.loading},e.createElement(H,{icon:r?e.createElement(vn,{className:P.likeIcon}):e.createElement(ct,{className:P.likeIcon}),onClick:s,className:P.like},e.createElement(M,{align:"center"},e.createElement("span",{className:P.likeText},r?"Starred":"Star"),e.createElement("span",{className:W(P.likeCount,"number")},a))))}transfer(t){var p;const n=i.exports.useContext(ge),{loading:u,error:r,result:a,execute:s}=N(Fa,[t.name]),l=$(fa),[c,m]=_e.useModal(),d=(F,E)=>{c.confirm({title:"\u786E\u5B9A\u8F6C\u8BA9\u7ED9 "+F+" \u5417\uFF1F",content:"\u8F6C\u8BA9\u540E\u4F60\u5C06\u4E0D\u80FD\u4EE5\u7BA1\u7406\u5458\u8EAB\u4EFD\u64CD\u4F5C\u8FD9\u4E2A\u6A21\u5757\uFF01",onOk:()=>{l.execute(t.name,E).then(()=>s(t.name)).then(()=>h.success("\u64CD\u4F5C\u6210\u529F")).catch(C=>h.error(C.message))}})},o=e.createElement(ce,null,((p=a==null?void 0:a.members)==null?void 0:p.length)&&(a==null?void 0:a.members.map(F=>e.createElement(ce.Item,{disabled:F.uid===n.id,key:F.uid,onClick:()=>d(F.nickname,F.uid)},e.createElement("div",null,"\u8F6C\u8BA9\u7ED9 ",F.nickname)))));return i.exports.useEffect(()=>r&&h.error(r.message),[r]),e.createElement(hr.Provider,{value:"Light"},e.createElement(Dt.Button,{type:"primary",disabled:(a==null?void 0:a.uid)!==n.id,loading:u,overlay:o},"\u8F6C\u8BA9"),m,e.createElement(Fr.Provider,{value:"Bamboo"}))}};at=gr([z(),j("/package/:pkg"),j("/package/:pkg/v/:version"),j("/package/@:scope/:pkg"),j("/package/@:scope/:pkg/v/:version"),X(G)],at);const fr="_plugin_e9plp_1",vr="_code_e9plp_8",_r="_desc_e9plp_13",Cr="_extra_e9plp_18";var ve={plugin:fr,code:vr,desc:_r,extra:Cr};async function br(){return(await b.get("/plugins")).data}function yr(t){return b.delete(`/plugin/${encodeURIComponent(t)}`)}function Br(t){return b.post("/plugin",t)}async function Dr(){return(await b.get("/plugin/history")).data}function xr(t,n){return b.put(`/plugin/${encodeURIComponent(t)}/configs`,n)}function Sr(t){return b.delete(`/plugin/history/cancel/${t}`)}var wr=Object.defineProperty,Ar=Object.getOwnPropertyDescriptor,$t=(t,n,u,r)=>{for(var a=r>1?void 0:r?Ar(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&wr(n,u,a),a};const{TabPane:_t}=He,kr=be.Group;let Ue=class{constructor(){_(this,"AdminBaseSettingPage");_(this,"size",8);_(this,"components",{input:v(this.inputComponent,this),select:v(this.selectComponent,this),radio:v(this.radioComponent,this),switch:v(this.switchComponent,this),checkbox:v(this.checkboxComponent,this)})}render(){const t=ne("tab","installed"),n=v(this.plugins,this),u=v(this.install,this),r=v(this.histories,this),a=$(br),s=$(Dr),[l,c]=i.exports.useState(null),m=i.exports.useMemo(()=>!!a.loading||!!s.loading,[a.loading,s.loading]),d=()=>a.execute().catch(F=>h.error(F.message)),o=()=>s.execute().catch(F=>h.error(F.message)),p=i.exports.useMemo(()=>!s||!s.result||!s.result.length?0:s.result.filter(F=>[0,1].includes(F.status)).length,[s==null?void 0:s.result]);return i.exports.useEffect(()=>c(t),[t]),i.exports.useEffect(()=>{switch(l){case"installed":d();break;case"history":o();break}},[l]),i.exports.useEffect(()=>{if(l==="history"&&p){const F=setInterval(o,2e3);return()=>clearInterval(F)}},[l,p]),e.createElement(V,{spinning:m},e.createElement(x,{gutter:[24,12]},e.createElement(g,{span:24},e.createElement(y,{align:"between",valign:"middle"},e.createElement(He,{size:"small",activeKey:l,onChange:F=>O("/admin/plugins?tab="+F)},e.createElement(_t,{tab:e.createElement("span",null,e.createElement(_n,null),"\u5DF2\u5B89\u88C5\u7684\u63D2\u4EF6"),key:"installed"}),e.createElement(_t,{tab:e.createElement("span",null,e.createElement(Cn,null),"\u63D2\u4EF6\u5B89\u88C5\u5386\u53F2"),key:"history"})),e.createElement(u,{refetch:l==="installed"?d:o}))),l==="installed"?e.createElement(n,{dataSource:(a==null?void 0:a.result)||[],refetch:d}):e.createElement(r,{dataSource:(s==null?void 0:s.result)||[]})))}plugins(t){const n=v(this.plugin,this);return e.createElement(i.exports.Fragment,null,t.dataSource.map(u=>e.createElement(g,{span:this.size,key:u.name},e.createElement(n,{dataSource:u,refetch:t.refetch}))))}histories(t){const n=i.exports.useMemo(()=>this.columns(),[]);return e.createElement(g,{span:24},e.createElement(wt,{pagination:!1,dataSource:t.dataSource,columns:n,rowKey:"id"}))}columns(){const t=v(this.viewProcess,this),n=v(this.cancelTask,this);return[{title:"\u63D2\u4EF6\u540D",className:"number",render(u){return e.createElement(i.exports.Fragment,null,u.status<0&&e.createElement(Y,{status:"error",text:u.name}),[0,1].includes(u.status)&&e.createElement(Y,{status:"processing",text:u.name}),u.status===2&&e.createElement(Y,{status:"success",text:u.name}))}},{title:"\u4EFB\u52A1\u5F00\u59CB\u65F6\u95F4",dataIndex:"startTimeStamp",className:"number",render:this.formatTime},{title:"\u4E0B\u8F7D\u7ED3\u675F\u65F6\u95F4",dataIndex:"endTimeStamp",className:"number",render:this.formatTime},{title:"\u5B89\u88C5\u7ED3\u675F\u65F6\u95F4",dataIndex:"installedTimeStamp",className:"number",render:this.formatTime},{title:"\u4E0B\u8F7D",dataIndex:"status",align:"center",render(u){if(u<0)return e.createElement(Q,{color:"error"},"\u5931\u8D25");if(u===0)return e.createElement(Q,{color:"processing"},"\u8FDB\u884C\u4E2D");if(u>=1)return e.createElement(Q,{color:"success"},"\u6210\u529F")}},{title:"\u5B89\u88C5",dataIndex:"status",align:"center",render(u){if(u<0)return e.createElement(Q,{color:"error"},"\u5931\u8D25");if(u===0)return e.createElement(Q,{color:"default"},"\u672A\u5F00\u59CB");if(u===1)return e.createElement(Q,{color:"processing"},"\u8FDB\u884C\u4E2D");if(u===2)return e.createElement(Q,{color:"success"},"\u6210\u529F")}},{title:"\u64CD\u4F5C",render(u){return e.createElement(M,null,![0,1].includes(u.status)&&e.createElement(t,{msg:u.msg}),u.status<0&&e.createElement(te,{title:u.error},e.createElement(f.Link,{disabled:!0},"\u9519\u8BEF")),[0,1].includes(u.status)&&e.createElement(n,{id:u.id}))}}]}viewProcess(t){const[n,u]=i.exports.useState(!1);return e.createElement(i.exports.Fragment,null,e.createElement(f.Link,{onClick:()=>u(!0)},"\u4FE1\u606F"),e.createElement(_e,{visible:n,onCancel:()=>u(!1),title:"\u5B89\u88C5\u8FC7\u7A0B\u4FE1\u606F",footer:null},e.createElement(x,{gutter:[12,8]},t.msg.map((r,a)=>e.createElement(g,{span:24,key:a},r)))))}cancelTask(t){const{execute:n,loading:u}=$(Sr),r=()=>{n(t.id).then(()=>h.success("\u53D6\u6D88\u4EFB\u52A1\u6210\u529F")).catch(a=>h.error(a.message))};return e.createElement(f.Link,{disabled:u,onClick:r},u?"\u53D6\u6D88\u4E2D...":"\u53D6\u6D88")}formatTime(t){return t?ye(t).format("YYYY-MM-DD HH:mm:ss"):null}plugin(t){const n=v(this.uninstall,this),u=v(this.setting,this);return e.createElement(y,{className:ve.plugin,scroll:"hide"},e.createElement(se,{src:t.dataSource.plugin_icon}),e.createElement(y,{span:1,scroll:"hide",direction:"column"},e.createElement(f.Text,{className:ve.label,ellipsis:!0,title:t.dataSource.plugin_name},t.dataSource.plugin_name),e.createElement(f.Text,{className:ve.code,ellipsis:!0,title:`${t.dataSource.name}@${t.dataSource.version}`},t.dataSource.name,"@",t.dataSource.version),e.createElement(f.Paragraph,{className:ve.desc,ellipsis:{rows:2},title:t.dataSource.description},t.dataSource.description),e.createElement(M,{className:ve.extra},!!t.dataSource.plugin_configs&&e.createElement(u,{name:t.dataSource.name,configs:t.dataSource.plugin_configs}),e.createElement(n,{name:t.dataSource.name,refetch:t.refetch}))))}uninstall(t){const{loading:n,execute:u}=$(yr),r=()=>{u(t.name).then(()=>t.refetch()).then(()=>h.success("\u5378\u8F7D\u63D2\u4EF6\u6210\u529F")).catch(a=>h.error(a.message))};return e.createElement(bn,{title:"\u786E\u5B9A\u8981\u5378\u8F7D\u6B64\u63D2\u4EF6\uFF1F",onConfirm:r,cancelText:"\u653E\u5F03",okText:"\u5378\u8F7D"},e.createElement(f.Link,{disabled:n},e.createElement(yn,null)," ",n?"\u5378\u8F7D\u4E2D...":"\u5378\u8F7D"))}install(t){const n=N(Ot,[]),u=$(Br),[r,a]=i.exports.useState(!1),[s,l]=i.exports.useState(null),[c,m]=i.exports.useState(!1),[d,o]=i.exports.useState(null),p=v(this.AdminBaseSettingPage.config,this.AdminBaseSettingPage),F=i.exports.useMemo(()=>{if(!n.result)return[];const C=[{label:n.result.domain,value:n.result.domain}];return C.push(...n.result.registries.map(A=>({label:A,value:A}))),C},[n.result]),E=()=>{u.execute({name:s,registry:d,dev:c}).then(()=>a(!1)).then(()=>t.refetch()).then(()=>h.success(c?"\u5B89\u88C5\u8C03\u8BD5\u63D2\u4EF6\u6210\u529F":"\u5B89\u88C5\u63D2\u4EF6\u8FDB\u884C\u4E2D\uFF0C\u8BF7\u524D\u5F80\u63D2\u4EF6\u5386\u53F2\u67E5\u770B\u5B89\u88C5\u8FDB\u5EA6")).catch(C=>h.error(C.message))};return i.exports.useEffect(()=>{F.length&&o(F[0].value)},[F]),i.exports.useEffect(()=>n.error&&h.error(n.error.message),[n.error]),e.createElement(i.exports.Fragment,null,e.createElement(H,{type:"primary",icon:e.createElement(yt,null),onClick:()=>a(!0)},"\u5B89\u88C5\u63D2\u4EF6"),e.createElement(_e,{title:"\u5B89\u88C5\u65B0\u63D2\u4EF6",visible:r,onOk:E,onCancel:()=>a(!1),cancelText:"\u53D6\u6D88",okText:"\u5B89\u88C5",confirmLoading:u.loading},e.createElement(x,{gutter:[24,32]},e.createElement(p,{title:e.createElement(Y,{status:"error",text:"\u63D2\u4EF6\u540D"}),description:"\u4E00\u822C\u6307\u63D2\u4EF6\u7684`package.json`\u7684`name`\u5C5E\u6027\uFF0C\u53EF\u4EE5\u5E26\u4E0A`@`\u7684\u7248\u672C\u53F7\uFF0C\u5982 `@nppm/dingtalk@1.0.0`\u3002\u5982\u679C\u9009\u62E9\u5F00\u53D1\u8C03\u8BD5\uFF0C\u8BF7\u8F93\u5165\u63D2\u4EF6\u6587\u4EF6\u5939\u5B8C\u6574\u8DEF\u5F84\u3002"},e.createElement(w,{disabled:u.loading,value:s,onChange:C=>l(C.target.value),placeholder:c?"\u8BF7\u8F93\u5165\u672C\u5730\u5F85\u8C03\u8BD5\u63D2\u4EF6\u6587\u4EF6\u5939\u5730\u5740...":"\u8BF7\u8F93\u5165\u63D2\u4EF6\u6807\u8BC6..."})),e.createElement(p,{title:"\u8C03\u8BD5",description:"\u5982\u679C\u5F00\u542F\u6B64\u9009\u9879\uFF0C\u8868\u793A\u6211\u4EEC\u5F00\u59CB\u5F00\u53D1\u63D2\u4EF6\uFF0C\u5728\u63D2\u4EF6\u540D\u4E2D\u8F93\u5165\u5F85\u5F00\u53D1\u63D2\u4EF6\u7684\u6587\u4EF6\u5939\u5730\u5740\u3002"},e.createElement(be,{disabled:u.loading,onChange:C=>m(C.target.checked),checked:c},"\u672C\u5730\u5F00\u53D1\u8C03\u8BD5")),!c&&e.createElement(p,{title:"\u4E0B\u8F7D\u63D2\u4EF6\u4ED3\u5E93\u9009\u62E9",description:"\u9009\u62E9\u63D2\u4EF6\u6240\u5728\u7684\u79C1\u6709\u4ED3\u5E93\u5730\u5740\uFF0C\u60A8\u53EF\u4EE5\u9009\u62E9\u516C\u6709\u6E90\uFF0C\u9875\u53EF\u4EE5\u9009\u62E9\u672C\u5730\u6E90\u3002"},e.createElement(de,{disabled:u.loading,value:d,style:{width:"100%"},onChange:C=>o(C),options:F})))))}setting(t){const[n,u]=i.exports.useState(!1),[r,a]=i.exports.useState({}),{loading:s,execute:l}=$(xr),c=v(this.AdminBaseSettingPage.config,this.AdminBaseSettingPage),m=()=>{l(t.name,r).then(()=>u(!1)).then(()=>h.success("\u66F4\u65B0\u63D2\u4EF6\u914D\u7F6E\u6210\u529F")).catch(o=>h.error(o.message))},d=(o,p)=>{const F=pt(r,[]);a(Fe(ue({},F),{[o]:p}))};return i.exports.useEffect(()=>{const o={};t.configs.forEach(p=>o[p.key]=p.value),a(o)},[t.configs]),e.createElement(i.exports.Fragment,null,e.createElement(f.Link,{onClick:()=>u(!0)},e.createElement(bt,null)," \u8BBE\u7F6E"),e.createElement(_e,{title:"\u66F4\u65B0\u914D\u7F6E",visible:n,confirmLoading:s,onOk:m,onCancel:()=>u(!1),cancelText:"\u53D6\u6D88",okText:"\u66F4\u65B0"},e.createElement(x,{gutter:[0,16]},t.configs.map(o=>{switch(o.type){case"input":const p=this.components.input;return e.createElement(g,{span:24,key:o.key},e.createElement(c,{title:o.title,description:o.description},e.createElement(p,{key:o.key,placeholder:o.placeholder,value:r[o.key],onChange:T=>d(o.key,T),mode:o.mode,width:o.width})));case"select":const F=this.components.select;return e.createElement(g,{span:24,key:o.key},e.createElement(c,{title:o.title,description:o.placeholder},e.createElement(F,{key:o.key,placeholder:o.placeholder,value:r[o.key],onChange:T=>d(o.key,T),fields:o.fields,width:o.width})));case"radio":const E=this.components.radio;return e.createElement(g,{span:24,key:o.key},e.createElement(c,{title:o.title,description:o.description},e.createElement(E,{key:o.key,value:r[o.key],onChange:T=>d(o.key,T),fields:o.fields})));case"switch":const C=this.components.switch;return e.createElement(g,{span:24,key:o.key},e.createElement(c,{title:o.title,description:o.description},e.createElement(C,{key:o.key,value:r[o.key],placeholder:o.placeholder,onChange:T=>d(o.key,T)})));case"checkbox":const A=this.components.checkbox;return e.createElement(g,{span:24,key:o.key},e.createElement(c,{title:o.title,description:o.description},e.createElement(A,{key:o.key,value:r[o.key],fields:o.fields,span:o.span,gutter:o.gutter,onChange:T=>d(o.key,T)})))}}))))}inputComponent(t){return t.mode==="number"?e.createElement(Ee,{placeholder:t.placeholder,value:t.value,onChange:n=>t.onChange(n),style:{width:t.width}}):t.mode==="textarea"?e.createElement(w.TextArea,{placeholder:t.placeholder,value:t.value,onChange:n=>t.onChange(n.target.value),autoSize:!0,allowClear:!0,style:{width:t.width}}):e.createElement(w,{placeholder:t.placeholder,value:t.value,onChange:n=>t.onChange(n.target.value),allowClear:!0,type:t.mode,style:{width:t.width}})}selectComponent(t){return e.createElement(de,{value:t.value,options:t.fields,style:{width:t.width},onChange:n=>t.onChange(n),placeholder:t.placeholder})}radioComponent(t){return e.createElement(Re.Group,{onChange:n=>t.onChange(n.target.value),value:t.value,options:t.fields})}switchComponent(t){return e.createElement(St,{checkedChildren:t.placeholder[0],unCheckedChildren:t.placeholder[1],checked:t.value,onChange:n=>t.onChange(n)})}checkboxComponent(t){return e.createElement(kr,{value:t.value,onChange:n=>t.onChange(n),style:{width:"100%"}},e.createElement(x,{gutter:t.gutter},t.fields.map(n=>e.createElement(g,{span:t.span,key:n.value},e.createElement(be,{value:n.value},n.label)))))}};$t([ae(ie)],Ue.prototype,"AdminBaseSettingPage",2);Ue=$t([z(),j("/admin/plugins"),X(G,{login:!0,admin:!0})],Ue);async function Pr(t,n){return(await b.get("/stars",{params:{page:t,size:n}})).data}var Nr=Object.defineProperty,Or=Object.getOwnPropertyDescriptor,Tr=(t,n,u,r)=>{for(var a=r>1?void 0:r?Or(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&Nr(n,u,a),a};let ut=class{constructor(){_(this,"size",8);_(this,"pageSizeOptions",["9","15","30","60"])}render(){const t=Number(ne("page","1")),n=Number(ne("size","15")),[u,r]=i.exports.useState(1),[a,s]=i.exports.useState(15),{loading:l,result:c,error:m}=N(Pr,[u,a]),d=(o,p)=>O(`/stars?page=${o}&size=${p}`);return i.exports.useEffect(()=>m&&h.error(m.message),[m]),i.exports.useEffect(()=>r(t),[t]),i.exports.useEffect(()=>s(n),[n]),e.createElement(V,{spinning:l,style:{minHeight:200}},c&&c[0]&&c[0].length?e.createElement(x,{gutter:[24,24]},c[0].map(o=>e.createElement(g,{span:this.size,key:o.id},e.createElement(Se,{name:o.name,version:o.version,description:o.description,size:o.size,downloads:o.downloads,versions:o.versions,maintainers:o.maintainers,likes:o.likes}))),!!c[1]&&e.createElement(g,{span:24},e.createElement(xe,{showSizeChanger:!0,current:u,pageSize:a,total:c[1],onChange:d,pageSizeOptions:this.pageSizeOptions}))):l?null:e.createElement(I,{description:"\u6B64\u6A21\u5757\u65E0\u8D21\u732E\u8005",image:I.PRESENTED_IMAGE_SIMPLE,style:{width:"100%"}}))}};ut=Tr([z(),j("/stars"),X(G,{login:!0})],ut);const Mr="_name_8sqjx_1",$r="_description_8sqjx_10",Ir="_extra_8sqjx_13",zr="_o_8sqjx_17",Rr="_l_8sqjx_22",Lr="_p_8sqjx_25",qr="_q_8sqjx_28",jr="_m_8sqjx_31",Ur="_tag_8sqjx_34",Hr="_searchFields_8sqjx_37",Vr="_publish_8sqjx_40";var q={name:Mr,description:$r,extra:Ir,o:zr,l:Rr,p:Lr,q:qr,m:jr,tag:Ur,searchFields:Hr,publish:Vr};async function Yr(t,n,u,r){return(await b.get("/search",{params:{q:t,o:n,s:u,t:r}})).data}var Gr=Object.defineProperty,Kr=Object.getOwnPropertyDescriptor,Qr=(t,n,u,r)=>{for(var a=r>1?void 0:r?Kr(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&Gr(n,u,a),a};let rt=class{constructor(){_(this,"size",10)}render(){const t=v(this.singlePackage,this),n=ne("q"),u=ne("t","private"),[r,a]=i.exports.useState(null),[s,l]=i.exports.useState("private"),[c,m]=i.exports.useState([]);i.exports.useEffect(()=>a(n),[n]),i.exports.useEffect(()=>l(u),[u]);const{loading:d,execute:o}=$(Yr),p=F=>{o(r,F,this.size,s).catch(E=>h.error(E.message)).then(E=>{const C=(F===0?[]:c).concat(E);m(C)})};return i.exports.useEffect(()=>{r&&s&&p(0)},[r,s]),e.createElement(V,{spinning:d,style:{minHeight:200}},e.createElement(x,{gutter:[24,24]},e.createElement(g,{span:24},e.createElement(y,{align:"between",valign:"middle",className:q.searchFields},e.createElement("span",null,e.createElement(Bn,null)," \u641C\u7D22\u5173\u952E\u5B57\uFF1A",!!r&&e.createElement(Q,{color:"blue"},r)),e.createElement(Re.Group,{onChange:F=>O(`/search?q=${r}&t=${F.target.value}`),value:s},e.createElement(Re,{value:"private"},"\u672C\u6E90"),e.createElement(Re,{value:"public"},"\u516C\u5171\u6E90")))),e.createElement(g,{span:24},e.createElement(Ft,{bordered:!1,dataSource:c,renderItem:F=>e.createElement(Ft.Item,null,e.createElement(t,{dataSource:F,type:s}))})),e.createElement(g,{span:24,style:{textAlign:"center"}},c.length>0&&c.length%this.size===0&&e.createElement(H,{onClick:()=>p(c.length)},"\u4E0B\u4E00\u9875"))))}singlePackage(t){var n,u,r,a;return e.createElement(x,{gutter:[24,24],style:{width:"100%"}},e.createElement(g,{span:18},e.createElement(M,{direction:"vertical",style:{width:"100%"},size:8},e.createElement(M,{className:q.name},e.createElement(f.Link,{onClick:()=>O("/package/"+t.dataSource.package.name)},t.dataSource.package.name),((u=(n=t.dataSource)==null?void 0:n.flags)==null?void 0:u.unstable)&&e.createElement(Q,{color:"purple"},"unstable")),e.createElement(f.Text,{ellipsis:!0,className:q.description,title:t.dataSource.package.description},t.dataSource.package.description),!!((r=t.dataSource.package)==null?void 0:r.keywords)&&e.createElement("div",{className:q.tags},t.dataSource.package.keywords.map((s,l)=>e.createElement(Q,{className:q.tag,key:s+":"+l,onClick:()=>O("/search?q="+encodeURIComponent(s)+"&t="+t.type)},s))),e.createElement(M,{className:W(q.extra,"number")},e.createElement(se,{src:t.dataSource.package.publisher.avatar||At.url(t.dataSource.package.publisher.email),shape:"square",size:22}),e.createElement(f.Link,{onClick:()=>t.type==="private"&&O("/user/"+t.dataSource.package.publisher.username)},t.dataSource.package.publisher.username),e.createElement("span",{className:q.publish},"Published ",e.createElement("span",null,"v",t.dataSource.package.version)),e.createElement("span",null,"\u2022"),e.createElement("span",null,ye(t.dataSource.package.date).format("YYYY-MM-DD HH:mm:ss"))))),t.type==="public"&&!!((a=t.dataSource)==null?void 0:a.score)&&e.createElement(g,{span:6},e.createElement(y,{direction:"column",valign:"bottom"},e.createElement(y,{valign:"middle",className:q.o},"p ",e.createElement("div",{style:{width:t.dataSource.score.detail.popularity*100},className:W(q.p,q.l)})),e.createElement(y,{valign:"middle",className:q.o},"q ",e.createElement("div",{style:{width:t.dataSource.score.detail.quality*100},className:W(q.q,q.l)})),e.createElement(y,{valign:"middle",className:q.o},"m ",e.createElement("div",{style:{width:t.dataSource.score.detail.maintenance*100},className:W(q.m,q.l)})))))}};rt=Qr([z(),j("/search"),X(G)],rt);async function Wr(t,n){return(await b.get("/stars/rank",{params:{page:t,size:n}})).data}var Zr=Object.defineProperty,Jr=Object.getOwnPropertyDescriptor,Xr=(t,n,u,r)=>{for(var a=r>1?void 0:r?Jr(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&Zr(n,u,a),a};let st=class{constructor(){_(this,"pageSizeOptions",["9","15","30","60"])}render(){const t=Number(ne("page","1")),n=Number(ne("size","15")),{loading:u,result:r,error:a}=N(Wr,[t,n]),s=r||[[],0],l=(c,m)=>O(`/rank/stars?page=${c}&size=${m}`);return i.exports.useEffect(()=>a&&h.error(a.message),[a]),e.createElement(V,{spinning:u,style:{minHeight:200}},e.createElement(x,{gutter:[24,24]},s[0].length?s[0].map(c=>e.createElement(g,{span:8,key:c.id},e.createElement(Se,{name:c.name,version:c.version,description:c.description,size:c.size,downloads:c.downloads,versions:c.versions,maintainers:c.maintainers,likes:c.likes}))):e.createElement(g,{span:24},e.createElement(I,{image:I.PRESENTED_IMAGE_SIMPLE})),!!s[1]&&e.createElement(g,{span:24},e.createElement(xe,{showSizeChanger:!0,current:t,pageSize:n,total:r[1],onChange:l,pageSizeOptions:this.pageSizeOptions}))))}};st=Xr([z(),j("/rank/stars"),X(G)],st);async function es(t,n){return(await b.get("/downloads/rank",{params:{page:t,size:n}})).data}var ts=Object.defineProperty,ns=Object.getOwnPropertyDescriptor,as=(t,n,u,r)=>{for(var a=r>1?void 0:r?ns(n,u):n,s=t.length-1,l;s>=0;s--)(l=t[s])&&(a=(r?l(n,u,a):l(a))||a);return r&&a&&ts(n,u,a),a};let lt=class{constructor(){_(this,"pageSizeOptions",["9","15","30","60"])}render(){const t=Number(ne("page","1")),n=Number(ne("size","15")),{loading:u,result:r,error:a}=N(es,[t,n]),s=r||[[],0],l=(c,m)=>O(`/rank/downloads?page=${c}&size=${m}`);return i.exports.useEffect(()=>a&&h.error(a.message),[a]),e.createElement(V,{spinning:u,style:{minHeight:200}},e.createElement(x,{gutter:[24,24]},s[0].length?s[0].map(c=>e.createElement(g,{span:8,key:c.id},e.createElement(Se,{name:c.name,version:c.version,description:c.description,size:c.size,downloads:c.downloads,versions:c.versions,maintainers:c.maintainers,likes:c.likes}))):e.createElement(g,{span:24},e.createElement(I,{image:I.PRESENTED_IMAGE_SIMPLE})),!!s[1]&&e.createElement(g,{span:24},e.createElement(xe,{showSizeChanger:!0,current:t,pageSize:n,total:r[1],onChange:l,pageSizeOptions:this.pageSizeOptions}))))}};lt=as([z(),j("/rank/downloads"),X(G)],lt);function us(t){t(tt),t(Be),t(je),t(ie),t(nt),t(De),t(at),t(Ue),t(ut),t(rt),t(st),t(lt)}Dn.locale("zh-cn");const{bootstrap:rs,defineController:ss,useGlobalMiddlewares:dt,createNotFoundComponent:ls}=wn();dt(cs);dt(Qn);dt(pe);us(ss);ls(()=>e.createElement(kn,null));rs("popstate",document.getElementById("root"));function cs(t){return e.createElement(xn,{locale:Sn},t.children)}
